# 배구 종목 스코어 보드 & 컨트롤 패널 개발 계획

## 📋 현재 상황 분석
- ✅ 배구 오버레이 템플릿 (`volleyball-template.html`) 존재
- ✅ 기본 스포츠 모델 구조 완성
- ❌ 배구 전용 컨트롤 패널 없음
- ❌ 배구 경기 데이터 모델 미완성
- ❌ 배구 관련 라우팅 및 API 없음

## 🎯 배구 경기 특성 분석

### 배구 경기의 핵심 요소:
1. **세트 시스템**: 5세트 3선승제 (25점, 15점) / 3세트 2선승제 (25점, 15점)  2가지 방식 선택 등록
2. **점수 시스템**: 랠리 포인트제 (서브권과 관계없이 득점)
3. **타임아웃**: 세트당 2회, 30초
4. **기술 통계**: 서브, 블로킹, 스파이크, 리시브 등
5. **서브권**: 서브권이 있는 팀 표시
6. **세트 점수**: 각 세트별 점수 기록

## 📁 필요한 파일 구조

```
views/
├── volleyball-control.ejs          # 데스크톱 컨트롤 패널
├── volleyball-control-mobile.ejs   # 모바일 컨트롤 패널
└── volleyball-template.ejs         # 오버레이 템플릿

public/
├── overlay-images/VOLLEYBALL/      # 배구 오버레이 이미지
└── TEAMLOGO/VOLLEYBALL/           # 배구 팀 로고

models/
└── index.js (배구 데이터 구조 추가)
```

## 🔧 개발 단계별 계획

### 1단계: 데이터 모델 확장 ✅
- [x] `Match` 모델에 배구 전용 데이터 구조 추가
- [x] 배구 경기 ID 생성 로직 (VB + 날짜 + 순번)
- [x] 세트 점수, 타임아웃, 서브권 등 배구 특화 필드

### 2단계: 컨트롤 패널 개발 ✅
- [x] **데스크톱 컨트롤 패널** (`volleyball-control.ejs`)
  - [x] 팀 정보 및 점수 관리
  - [x] 세트별 점수 입력
  - [x] 타임아웃 관리 (각 팀별 2회)
  - [x] 서브권 표시 토글
  - [x] 경기 상태 관리 (세트 시작/종료)
  - [x] 타이머 기능

- [x] **모바일 컨트롤 패널** (`volleyball-control-mobile.ejs`)
  - [x] 터치 친화적 인터페이스
  - [x] 핵심 기능만 포함
  - [x] 빠른 점수 입력

### 3단계: 오버레이 템플릿 업데이트 ✅
- [x] 기존 `volleyball-template.html`을 EJS로 변환
- [x] 실시간 데이터 연동
- [x] 세트 점수 히스토리 표시
- [x] 타임아웃 상태 표시
- [x] 서브권 표시

### 4단계: 서버 라우팅 및 API ✅
- [x] 배구 경기 생성 API
- [x] 배구 데이터 업데이트 API
- [x] Socket.IO 이벤트 처리
- [x] 배구 전용 경기 관리 페이지

### 5단계: 통합 및 테스트
- [ ] 기존 시스템과 통합
- [ ] 배구 경기 생성 및 관리 테스트
- [ ] 실시간 업데이트 테스트

## 🎨 UI/UX 설계 방향

### 컨트롤 패널 주요 섹션:
1. **팀 정보 섹션**: 팀명, 로고, 색상 설정
2. **메인 스코어 섹션**: 현재 세트 점수, 전체 세트 스코어
3. **세트 관리 섹션**: 세트별 점수 입력, 세트 종료/시작
4. **타임아웃 섹션**: 각 팀별 타임아웃 카운트 (2/2)
5. **서브권 섹션**: 현재 서브권 표시
6. **경기 정보 섹션**: 경기명, 경기장, 타이머, 상태
7. **기술 통계 섹션**: 서브, 블로킹, 스파이크 등 (선택사항)

### 오버레이 주요 요소:
1. **상단 스코어보드**: 팀 정보, 현재 점수, 세트 점수
2. **현재 세트 표시**: "3세트" 형태
3. **세트 히스토리**: 완료된 세트들의 점수
4. **타임아웃 상태**: 각 팀별 타임아웃 사용 현황
5. **서브권 표시**: 현재 서브권이 있는 팀 하이라이트
6. **하단 정보**: 경기명, 경기장, 타이머, 경기 상태

## ⏰ 우선순위 및 일정

### 즉시 시작 가능한 작업:
1. 데이터 모델 확장 (30분)
2. 기본 컨트롤 패널 구조 (1시간)
3. 오버레이 템플릿 EJS 변환 (30분)

### 중기 작업:
1. 세트 관리 기능 (1시간)
2. 타임아웃 시스템 (30분)
3. 서브권 표시 (30분)

### 후기 작업:
1. 기술 통계 기능 (선택사항)
2. 고급 설정 옵션
3. 성능 최적화

## 📝 배구 경기 데이터 구조

```javascript
// 배구 경기 기본 데이터 구조
{
  current_set: 1,                    // 현재 세트
  home_score: 0,                     // 홈팀 현재 세트 점수
  away_score: 0,                     // 원정팀 현재 세트 점수
  home_sets: 0,                      // 홈팀 승리 세트 수
  away_sets: 0,                      // 원정팀 승리 세트 수
  set_scores: {                      // 세트별 점수
    1: { home: 0, away: 0, winner: null },
    2: { home: 0, away: 0, winner: null },
    3: { home: 0, away: 0, winner: null },
    4: { home: 0, away: 0, winner: null },
    5: { home: 0, away: 0, winner: null }
  },
  home_timeouts: 0,                  // 홈팀 타임아웃 사용 횟수
  away_timeouts: 0,                  // 원정팀 타임아웃 사용 횟수
  serving_team: 'home',              // 서브권 (home/away)
  match_status: 'pending',           // 경기 상태
  timer: 0,                          // 타이머
  lastUpdateTime: Date.now(),
  isRunning: false
}
```

---
**개발 시작일**: 2025년 1월
**예상 완료일**: 2025년 1월
**개발자**: AI Assistant
