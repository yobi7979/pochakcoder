# 배구 점수 시스템 설계 문서

## 📋 개요
배구 경기에서 세트스코어와 매치스코어를 별도로 관리하는 시스템 설계

## 🎯 핵심 개념

### 1. 세트스코어 (Set Score)
- **정의**: 현재 진행 중인 세트의 양팀 점수
- **예시**: 1세트 진행 중 → 홈팀 25점, 어웨이팀 23점
- **표시**: 컨트롤 페이지의 +/- 버튼으로 조작
- **저장**: `match_data.sets.home[세트번호]`, `match_data.sets.away[세트번호]`

### 2. 매치스코어 (Match Score)
- **정의**: 완료된 세트들의 승리 수
- **예시**: 1세트 완료(홈팀 승리) → 홈팀 1세트, 어웨이팀 0세트
- **표시**: 오버레이 페이지의 원형 도형으로 표시
- **저장**: `home_score`, `away_score` (세트 승리 수)

## 🔄 점수 관리 시스템

### 세트스코어 관리
```javascript
// 현재 세트의 점수 (진행 중)
sets: {
  home: {1: 25, 2: 0, 3: 0, 4: 0, 5: 0},
  away: {1: 23, 2: 0, 3: 0, 4: 0, 5: 0}
}
```

### 매치스코어 관리
```javascript
// 세트 승리 수 (완료된 세트만)
home_score: 1,  // 홈팀이 1세트 승리
away_score: 0   // 어웨이팀이 0세트 승리
```

## 🎮 컨트롤 페이지 기능

### +/- 버튼 동작
- **대상**: 현재 세트의 점수만 조작
- **저장**: `match_data.sets.home[현재세트]`, `match_data.sets.away[현재세트]`
- **표시**: 컨트롤 페이지의 점수 입력 필드

### 다음세트 버튼 동작
1. 현재 세트의 최종 점수 저장
2. 세트 승자 결정 (점수가 높은 팀)
3. 매치스코어 업데이트 (승리한 팀 +1)
4. 다음 세트로 이동
5. 현재 세트 점수 초기화

## 🖥️ 오버레이 페이지 표시

### 세트 점수 표시
- **위치**: 중앙 점수 표시 영역
- **내용**: 현재 세트의 양팀 점수
- **업데이트**: 실시간으로 세트 점수 변경 반영

### 매치스코어 표시
- **위치**: 원형 도형 (세트제에 따라 3개 또는 5개)
- **표시**: 완료된 세트의 승리 팀 표시
- **예시**: 2세트 진행 중 → 1세트 승자의 원형이 채워짐

## 📊 데이터 구조

### 데이터베이스 저장
```javascript
// Match 테이블
{
  home_score: 1,        // 매치스코어 (세트 승리 수)
  away_score: 0,        // 매치스코어 (세트 승리 수)
  match_data: {
    current_set: 2,      // 현재 세트
    setFormat: 3,        // 세트제 (3세트제 또는 5세트제)
    sets: {              // 세트스코어
      home: {1: 25, 2: 0, 3: 0, 4: 0, 5: 0},
      away: {1: 23, 2: 0, 3: 0, 4: 0, 5: 0}
    }
  }
}
```

## 🔄 워크플로우

### 1. 경기 시작
- 현재 세트: 1세트
- 세트 점수: 0:0
- 매치 점수: 0:0

### 2. 세트 진행 중
- +/- 버튼으로 세트 점수 조작
- 세트 점수만 변경, 매치 점수는 변경 안됨

### 3. 다음세트 버튼 클릭
- 현재 세트의 승자 결정
- 매치 점수 업데이트 (승자 +1)
- 다음 세트로 이동
- 세트 점수 초기화

### 4. 경기 종료
- 세트제에 따라 3세트 또는 5세트 완료
- 최종 매치 점수로 승자 결정

## 🎯 구현 요구사항

### 컨트롤 페이지
1. +/- 버튼: 세트 점수만 조작
2. 다음세트 버튼: 매치 점수 업데이트
3. 세트 점수 표: 각 세트별 점수 표시
4. 매치 점수 표: 세트 승리 수 표시

### 오버레이 페이지
1. 현재 세트 점수 실시간 표시
2. 원형 도형으로 매치 점수 표시
3. 세트제에 따른 원형 개수 조정
4. 완료된 세트의 승리 표시

### 모바일 페이지
1. 컨트롤 페이지와 동일한 기능
2. 모바일 최적화된 UI
3. 터치 친화적인 버튼 크기

## 📝 참고사항

- 세트스코어와 매치스코어는 완전히 별개의 개념
- 세트스코어는 현재 세트의 점수만 관리
- 매치스코어는 완료된 세트의 승리 수만 관리
- 오버레이의 원형 도형은 매치스코어를 시각적으로 표현
- 세트제에 따라 3세트제(2세트 선취승) 또는 5세트제(3세트 선취승) 지원
