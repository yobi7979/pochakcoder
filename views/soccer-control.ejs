<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶•êµ¬ ê²½ê¸° ì»¨íŠ¸ë¡¤ íŒ¨ë„</title>
    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„¤ì •
        window.matchId = '<%= match.id %>';
        window.sportType = 'SOCCER';
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/unified-team-logo-modal.js"></script>
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
        }
        
        body {
            background-color: var(--light-color);
            padding: 10px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .control-panel {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .panel-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }
        
        .score-section {
            margin: 15px 0;
        }
        
        .score-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .score-input::-webkit-inner-spin-button,
        .score-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .score-input {
            appearance: textfield;
            -moz-appearance: textfield;
            width: 80px;
            height: 40px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border-radius: 8px;
            border: 2px solid #ddd;
            padding: 5px;
        }
        
        .score-controls {
            display: flex;
            gap: 5px;
        }
        
        .score-btn {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 20px;
        }
        
        .team-color-section {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 10px;
        }
        
        .team-color-section .form-control {
            flex: 1;
        }
        
        .team-color-section .form-control-color {
            width: 35px;
            height: 30px;
            border: none;
            background: none;
            padding: 0;
            box-shadow: none;
            outline: none;
        }
        
        .team-color-section .form-control-color::-webkit-color-swatch-wrapper {
            padding: 0;
            border: none;
        }
        
        .team-color-section .form-control-color::-webkit-color-swatch {
            border: none;
            border-radius: 4px;
        }
        
        .time-edit-container {
            margin-left: 10px;
            padding: 8px 12px;
            background-color: rgba(0, 123, 255, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(0, 123, 255, 0.3);
        }
        
        .time-edit-input {
            width: 120px;
            text-align: center;
            border-radius: 6px;
            border: 1px solid var(--primary-color);
            padding: 4px 8px;
            font-size: 0.9rem;
        }
        
        .apply-time-btn {
            border-radius: 6px;
            padding: 4px 12px;
                font-size: 0.9rem;
            }
            
            
        .team-color-section .save-team-color {
            white-space: nowrap;
        }
        
        /* íŒ€ ê´€ë¦¬ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .team-management-section {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .team-management-section > div {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .team-logo-bg-section {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .team-management-section .form-control-color {
            width: 35px;
            height: 30px;
            border: none;
            background: none;
            padding: 0;
            box-shadow: none;
            outline: none;
        }
        
        .team-management-section .form-control-color::-webkit-color-swatch-wrapper {
            padding: 0;
            border: none;
        }
        
        .team-management-section .form-control-color::-webkit-color-swatch {
            border: none;
            border-radius: 4px;
        }
        
        .team-management-section .form-label {
            font-size: 0.9rem;
            margin-bottom: 0;
            white-space: nowrap;
        }
        
        .team-management-section .btn {
            font-size: 0.8rem;
            padding: 4px 8px;
        }
        
        /* ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ í†µì¼ */
        .team-color-container,
        .team-logo-bg-container {
            flex: 1;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            margin: 0 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .team-color-container .team-color-section,
        .team-logo-bg-container .team-logo-bg-section {
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 0;
        }
        
        .team-color-container .form-label,
        .team-logo-bg-container .form-label {
            font-size: 0.9rem;
            margin-bottom: 0;
            white-space: nowrap;
            min-width: 60px;
        }
        
        /* íŒ€ë¡œê³  ê´€ë¦¬ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .team-logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 10px;
        }
        
        .logo-controls {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .logo-controls .form-control-color {
            width: 35px;
            height: 30px;
            border: none;
            background: none;
            padding: 0;
            box-shadow: none;
            outline: none;
        }
        
        .logo-controls .form-control-color::-webkit-color-swatch-wrapper {
            padding: 0;
            border: none;
        }
        
        .logo-controls .form-control-color::-webkit-color-swatch {
            border: none;
            border-radius: 4px;
        }
        
        /* ì ìˆ˜ ë° ë¡œê³  ê´€ë¦¬ ì„¹ì…˜ */
        .score-logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .score-logo-section .score-section {
            flex: 1;
        }
        
        .score-logo-section .team-logo-section {
            flex-shrink: 0;
        }
        
        .team-logo-preview {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            overflow: hidden;
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .team-logo-preview:hover {
            border-color: #007bff;
        }
        
        .team-logo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .no-logo {
            font-size: 0.7rem;
            color: #6c757d;
            text-align: center;
        }
        
        .team-logo-section .form-label {
            font-size: 0.9rem;
            margin-bottom: 0;
        }
        
        .logo-controls .btn {
            font-size: 0.7rem;
            padding: 3px 6px;
            white-space: nowrap;
        }
        
        .team-logo-section .btn {
            font-size: 0.8rem;
            padding: 4px 8px;
        }
        
        /* URL ì„¹ì…˜ ë‚´ íŒ€ë¡œê³  ì œì–´ */
        .logo-control-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .logo-control-item .url-type {
            min-width: 30px;
        }
        
        .logo-control-item .btn {
            font-size: 0.75rem;
            padding: 4px 8px;
        }
        
        .logo-control-buttons .btn {
            font-size: 0.8rem;
            padding: 6px 12px;
        }
        
        /* í—¤ë” ì„¹ì…˜ */
            .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .panel-title {
            margin: 0;
            color: #2c3e50;
            font-weight: 600;
        }
        
        /* ì—°ê²° ìƒíƒœ í‘œì‹œ ìŠ¤íƒ€ì¼ */
        .connection-status {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-indicator.connected {
            background-color: #28a745;
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.5);
        }
        
        .status-indicator.disconnected {
            background-color: #dc3545;
            box-shadow: 0 0 8px rgba(220, 53, 69, 0.5);
        }
        
        .back-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
        }
        
        /* URL ë³µì‚¬ ì„¹ì…˜ (ì»´íŒ©íŠ¸ ë²„ì „) */
        .url-section-compact {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
        }
        
        .url-label {
            font-weight: 600;
            color: #495057;
            white-space: nowrap;
        }
        
        .url-item {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .url-type {
            font-size: 0.8rem;
            font-weight: 500;
            color: #6c757d;
            min-width: 50px;
            text-align: center;
        }
        
        .url-input-compact {
            font-size: 0.85rem;
            padding: 4px 8px;
            height: 32px;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }

        .url-input-compact:focus {
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        /* ìŠ¹ë¶€ì°¨ê¸° ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .penalty-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
        }
        
        
        .penalty-controls {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .penalty-label {
            font-size: 0.8rem;
            font-weight: 500;
            color: #6c757d;
            min-width: 40px;
            text-align: center;
        }
        
        /* ë“ì  ì •ë³´ ì…ë ¥ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .goal-input-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }
        
        .goal-input-row input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .goal-input-row .btn-sm {
            padding: 4px 8px;
            font-size: 0.8rem;
        }
        
        .goal-input-row .time-input {
            width: 80px;
            text-align: center;
        }
        
        .goal-input-row .player-input {
            flex: 2;
        }
        
        /* ìƒˆë¡œìš´ ë“ì  ì •ë³´ ì…ë ¥ ìŠ¤íƒ€ì¼ */
        .goal-input-form {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
        }
        
        .goals-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 10px;
            background: #ffffff;
        }
        
        .goal-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            margin-bottom: 2px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .goal-item:last-child {
            margin-bottom: 0;
        }
        
        .goal-item .goal-text {
            flex: 1;
            font-weight: 500;
        }
        
        .goal-item .goal-time {
            color: #6c757d;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .goal-item .btn-sm {
            padding: 2px 6px;
            font-size: 0.7rem;
        }
        
        /* í¸ì§‘ ê°€ëŠ¥í•œ ë“ì  ì •ë³´ ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
        .goal-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 2px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }
        
        .goal-player-input, .goal-time-input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 0.9rem;
            background: #ffffff;
        }
        
        .goal-player-input:focus, .goal-time-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            outline: none;
        }
        
        .goal-time-input {
            width: 80px;
            text-align: center;
        }
        
        /* ì…ë ¥ í¼ í…ìŠ¤íŠ¸ ë°•ìŠ¤ í¬ê¸° ì¡°ì • */
        .goal-input-form .form-control {
            font-size: 1rem;
            padding: 10px 12px;
            height: auto;
        }
        
        .goal-input-form .btn-sm {
            padding: 8px 12px;
            font-size: 0.9rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* íŒ€ë³„ ë“ì  ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .team-goals-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            height: 100%;
            min-height: 300px;
        }
        
        .team-goals-section h6 {
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        
        .team-goals-section .goal-input-form {
            background: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 12px;
        }
        
        .team-goals-section .goals-list {
            max-height: 180px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 8px;
            background: #ffffff;
        }
        
        /* í™ˆíŒ€/ì–´ì›¨ì´íŒ€ êµ¬ë¶„ì„  */
        .team-goals-section:first-child {
            border-right: 2px solid #dee2e6;
            margin-right: 10px;
        }
        
        .team-goals-section:last-child {
            margin-left: 10px;
        }
        
        .timer-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .timer-display {
            font-size: 3rem;
            font-weight: 900;
            font-family: 'Noto Sans KR', sans-serif;
            margin-bottom: 20px;
            color: #2c3e50;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .timer-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: nowrap;
        }
        
        .timer-controls .btn {
            padding: 8px 12px;
            font-size: 0.9rem;
            min-width: 70px;
        }
        
        .url-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .url-input {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="control-panel">
        <!-- í—¤ë” -->
        <div class="panel-header">
            <h2 class="panel-title">
                <i class="bi bi-trophy"></i> ì¶•êµ¬ ê²½ê¸° ì»¨íŠ¸ë¡¤ íŒ¨ë„
            </h2>
            <div class="d-flex align-items-center gap-3">
                <div class="connection-status">
                    <span id="connection-indicator" class="status-indicator"></span>
                    <span id="connection-text">ì„œë²„ ì—°ê²° ì¤‘...</span>
                </div>
            <a href="/matches" class="btn btn-outline-secondary back-btn">
                <i class="bi bi-arrow-left"></i> ëª©ë¡
            </a>
        </div>
        </div>
        
        <!-- URL ë³µì‚¬ ì„¹ì…˜ (ì»´íŒ©íŠ¸ ë²„ì „) -->
        <div class="url-section-compact">
            <div class="d-flex align-items-center gap-3">
                <span class="url-label">
                    <i class="bi bi-link-45deg"></i> URL:
                </span>
                <div class="url-item">
                    <span class="url-type">ëª¨ë°”ì¼</span>
                    <input type="text" id="mobile-url" class="form-control url-input-compact" readonly>
                    <button class="btn btn-sm btn-outline-secondary" onclick="copyMobileUrl()">
                        <i class="bi bi-copy"></i>
                        </button>
                    </div>
                <div class="url-item">
                    <span class="url-type">ì˜¤ë²„ë ˆì´</span>
                    <input type="text" id="overlay-url" class="form-control url-input-compact" readonly>
                    <button class="btn btn-sm btn-outline-secondary" onclick="copyOverlayUrl()">
                        <i class="bi bi-copy"></i>
                                </button>
                </div>
                <!-- íŒ€ë¡œê³  ì‚¬ìš©ìœ ë¬´ ì œì–´ -->
                <div class="url-item logo-control-item">
                    <span class="url-type">ë¡œê³ </span>
                    <button class="btn btn-sm btn-success" id="toggle-team-logos">
                        <i class="bi bi-eye"></i> í‘œì‹œ
                    </button>
                    <button class="btn btn-sm btn-outline-secondary" id="toggle-logo-display" style="display: none;">
                        <i class="bi bi-palette"></i> ë°°ê²½ë§Œ
                    </button>
                </div>
            </div>
        </div>


        <!-- íƒ€ì´ë¨¸ ì„¹ì…˜ -->
                    <div class="timer-section">
            <div class="timer-display" id="timer-display">00:00</div>
                        <div class="timer-controls">
                <button class="btn btn-success" onclick="startTimer()">
                            <i class="bi bi-play-fill"></i> ì‹œì‘
                        </button>
                <button class="btn btn-warning" onclick="stopTimer()">
                    <i class="bi bi-pause-fill"></i> ì •ì§€
                        </button>
                <button class="btn btn-secondary" onclick="resetTimer()">
                    <i class="bi bi-arrow-clockwise"></i> ë¦¬ì…‹
                        </button>
                <button class="btn btn-primary" onclick="toggleTimeEdit()">
                            <i class="bi bi-pencil"></i> ìˆ˜ì •
                        </button>
                        
                        <!-- ì‹œê°„ ìˆ˜ì • ì…ë ¥ í•„ë“œ (ìˆ˜ì • ë²„íŠ¼ ì˜†ì— ê³ ì • í‘œì‹œ) -->
                    <div id="time-edit-container" class="time-edit-container" style="display: none;">
                        <div class="d-flex align-items-center">
                                <div class="me-2">
                                    <input type="text" id="time-edit-input" class="form-control time-edit-input" placeholder="ìˆ«ì ì…ë ¥ (ì˜ˆ: 1, 11, 111, 1111)" maxlength="6">
                            </div>
                            <div>
                                <button id="apply-time-btn" class="btn btn-success apply-time-btn">
                                    <i class="bi bi-check-lg"></i> ì ìš©
                                </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- íŒ€ ìœ„ì¹˜ ë³€ê²½ ë²„íŠ¼ -->
            <div class="text-center mt-3">
                <button class="btn btn-warning btn-sm" onclick="swapTeams()">
                    <i class="bi bi-arrow-left-right"></i> íŒ€ ìœ„ì¹˜ ë³€ê²½
                            </button>
                <small class="text-muted d-block mt-1">í™ˆíŒ€ê³¼ ì–´ì›¨ì´íŒ€ì˜ ì •ë³´ë¥¼ ì„œë¡œ ë°”ê¿‰ë‹ˆë‹¤</small>
                        </div>
            </div>
            
        <!-- í™ˆíŒ€ ì„¹ì…˜ -->
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-house"></i> <%= match.home_team %></h5>
                    </div>
                    <div class="card-body">
                        <!-- íŒ€ëª… ìˆ˜ì • -->
                        <div class="mb-3">
                            <div class="input-group">
                                <input type="text" id="home-team-name" class="form-control" value="<%= match.home_team %>">
                        <button class="btn btn-success btn-sm save-team-name" data-team="home">
                            <i class="bi bi-check-lg"></i> íŒ€ëª… ì €ì¥
                            </button>
                        </div>
                                    </div>
            
                        <!-- íŒ€ ì»¬ëŸ¬ ë° ë¡œê³  ê´€ë¦¬ -->
                        <div class="team-management-section">
                            <!-- íŒ€ ì»¬ëŸ¬ -->
                            <div class="team-color-container">
                                <div class="team-color-section">
                                    <label class="form-label">íŒ€ ì»¬ëŸ¬</label>
                                    <input type="color" id="home-team-color" class="form-control form-control-color" value="<%= match.home_team_color || '#1e40af' %>">
                                    <button class="btn btn-primary save-team-color" data-team="home">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                </div>
                            </div>
                            
                            <!-- íŒ€ë¡œê³  ë°°ê²½ìƒ‰ -->
                            <div class="team-logo-bg-container">
                                <div class="team-logo-bg-section">
                                    <label class="form-label">ë°°ê²½ìƒ‰</label>
                                    <input type="color" id="home-team-logo-bg" class="form-control form-control-color" value="<%= match.match_data?.home_team_colorbg || '#ffffff' %>" title="ë¡œê³  ë°°ê²½ìƒ‰">
                                    <button class="btn btn-success save-team-logo-bg" data-team="home">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ì ìˆ˜ ë° ë¡œê³  ê´€ë¦¬ ì„¹ì…˜ -->
                        <div class="score-logo-section">
                            <!-- ì ìˆ˜ ì»¨íŠ¸ë¡¤ -->
                            <div class="score-section">
                                <label class="form-label">ì ìˆ˜</label>
                                <div class="score-input-group">
                                    <button class="btn btn-danger score-btn" onclick="updateScore('home', -1)">
                                        <i class="bi bi-dash"></i>
                                    </button>
                                    <input type="number" id="home-score" class="score-input" value="<%= match.home_score || 0 %>" readonly>
                                    <button class="btn btn-success score-btn" onclick="updateScore('home', 1)">
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- íŒ€ë¡œê³  ë¯¸ë¦¬ë³´ê¸° ë° ì»¨íŠ¸ë¡¤ -->
                            <div class="team-logo-section">
                                <div class="team-logo-preview" id="home-team-logo-preview" onclick="openLogoModal('home')" style="cursor: pointer;">
                                    <div class="no-logo">ë¡œê³  ì—†ìŒ</div>
                                </div>
                                <div class="logo-controls">
                                    <input type="file" id="home-team-logo" class="form-control" accept="image/*" style="display: none;">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="document.getElementById('home-team-logo').click()">
                                        <i class="bi bi-upload"></i> ì—…ë¡œë“œ
                                    </button>
                                    <button class="btn btn-success btn-sm save-team-logo" data-team="home">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                    <button class="btn btn-danger btn-sm" onclick="removeTeamLogo('home')">
                                        <i class="bi bi-trash"></i> ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì–´ì›¨ì´íŒ€ ì„¹ì…˜ -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0"><i class="bi bi-airplane"></i> <%= match.away_team %></h5>
                    </div>
                    <div class="card-body">
                        <!-- íŒ€ëª… ìˆ˜ì • -->
                        <div class="mb-3">
                            <div class="input-group">
                                <input type="text" id="away-team-name" class="form-control" value="<%= match.away_team %>">
                                <button class="btn btn-success btn-sm save-team-name" data-team="away">
                                    <i class="bi bi-check-lg"></i> íŒ€ëª… ì €ì¥
                                            </button>
                                        </div>
                                    </div>
                            
                        <!-- íŒ€ ì»¬ëŸ¬ ë° ë¡œê³  ê´€ë¦¬ -->
                        <div class="team-management-section">
                            <!-- íŒ€ ì»¬ëŸ¬ -->
                            <div class="team-color-container">
                                <div class="team-color-section">
                                    <label class="form-label">íŒ€ ì»¬ëŸ¬</label>
                                    <input type="color" id="away-team-color" class="form-control form-control-color" value="<%= match.away_team_color || '#1e40af' %>">
                                    <button class="btn btn-primary save-team-color" data-team="away">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                </div>
                            </div>
                            
                            <!-- íŒ€ë¡œê³  ë°°ê²½ìƒ‰ -->
                            <div class="team-logo-bg-container">
                                <div class="team-logo-bg-section">
                                    <label class="form-label">ë°°ê²½ìƒ‰</label>
                                    <input type="color" id="away-team-logo-bg" class="form-control form-control-color" value="<%= match.match_data?.away_team_colorbg || '#ffffff' %>" title="ë¡œê³  ë°°ê²½ìƒ‰">
                                    <button class="btn btn-success save-team-logo-bg" data-team="away">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        
                        <!-- ì ìˆ˜ ë° ë¡œê³  ê´€ë¦¬ ì„¹ì…˜ -->
                        <div class="score-logo-section">
                            <!-- ì ìˆ˜ ì»¨íŠ¸ë¡¤ -->
                            <div class="score-section">
                                <label class="form-label">ì ìˆ˜</label>
                                <div class="score-input-group">
                                    <button class="btn btn-danger score-btn" onclick="updateScore('away', -1)">
                                        <i class="bi bi-dash"></i>
                                    </button>
                                    <input type="number" id="away-score" class="score-input" value="<%= match.away_score || 0 %>" readonly>
                                    <button class="btn btn-success score-btn" onclick="updateScore('away', 1)">
                                        <i class="bi bi-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- íŒ€ë¡œê³  ë¯¸ë¦¬ë³´ê¸° ë° ì»¨íŠ¸ë¡¤ -->
                            <div class="team-logo-section">
                                <div class="team-logo-preview" id="away-team-logo-preview" onclick="openLogoModal('away')" style="cursor: pointer;">
                                    <div class="no-logo">ë¡œê³  ì—†ìŒ</div>
                                </div>
                                <div class="logo-controls">
                                    <input type="file" id="away-team-logo" class="form-control" accept="image/*" style="display: none;">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="document.getElementById('away-team-logo').click()">
                                        <i class="bi bi-upload"></i> ì—…ë¡œë“œ
                                    </button>
                                    <button class="btn btn-success btn-sm save-team-logo" data-team="away">
                                        <i class="bi bi-save"></i> ì €ì¥
                                    </button>
                                    <button class="btn btn-danger btn-sm" onclick="removeTeamLogo('away')">
                                        <i class="bi bi-trash"></i> ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìŠ¹ë¶€ì°¨ê¸° ì„¹ì…˜ê³¼ ê·¸ë˜í”½ í† ê¸€ ì„¹ì…˜ (ë‚˜ë€íˆ ë°°ì¹˜) -->
        <div class="row mb-3">
            <!-- ìŠ¹ë¶€ì°¨ê¸° ì„¹ì…˜ -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-trophy"></i> ìŠ¹ë¶€ì°¨ê¸°
                        </h6>
                        </div>
                    <div class="card-body">
                        <div class="penalty-section">
                            <div class="penalty-text-display mb-3">
                                <div class="form-control text-center" id="penalty-text-display" style="background-color: #f8f9fa; border: 1px solid #dee2e6; font-weight: 600; color: #495057;">
                                    0 (ìŠ¹ë¶€ì°¨ê¸°) 0
                        </div>
                                <small class="text-muted">í˜„ì¬ ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸</small>
                        </div>
                            <div class="d-flex align-items-center justify-content-center gap-4 mb-3">
                                <div class="penalty-controls">
                                    <button class="btn btn-sm btn-outline-danger" onclick="updatePenaltyScore('home', -1)">
                                        <i class="bi bi-dash"></i>
                    </button>
                                    <span class="penalty-label">í™ˆíŒ€</span>
                                    <button class="btn btn-sm btn-outline-success" onclick="updatePenaltyScore('home', 1)">
                                        <i class="bi bi-plus"></i>
                        </button>
                    </div>
                                <div class="penalty-controls">
                                    <button class="btn btn-sm btn-outline-danger" onclick="updatePenaltyScore('away', -1)">
                                        <i class="bi bi-dash"></i>
                    </button>
                                    <span class="penalty-label">ì–´ì›¨ì´íŒ€</span>
                                    <button class="btn btn-sm btn-outline-success" onclick="updatePenaltyScore('away', 1)">
                                        <i class="bi bi-plus"></i>
                        </button>
                    </div>
                    </div>
                            <div class="text-center">
                                <button class="btn btn-info btn-sm" onclick="togglePenaltyDisplay()">
                                    <i class="bi bi-eye"></i> í‘œì‹œ
                        </button>
                </div>
            </div>
        </div>
                        </div>
            </div>
            
            <!-- ê·¸ë˜í”½ í† ê¸€ ì„¹ì…˜ -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-palette"></i> ê·¸ë˜í”½ í‘œì‹œ
                        </h6>
                    </div>
                    <div class="card-body">
                        <!-- ëŒ€íšŒëª… ì…ë ¥ ì„¹ì…˜ -->
                        <div class="mb-3">
                            <label for="tournamentText" class="form-label">
                                <i class="bi bi-trophy"></i> ëŒ€íšŒëª…
                            </label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="tournamentText" placeholder="ëŒ€íšŒëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                                <button class="btn btn-outline-primary" type="button" onclick="updateTournamentText()">
                                    <i class="bi bi-check"></i> ì ìš©
                                </button>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-12 mb-2">
                                <button class="btn btn-success btn-sm w-100" id="toggle-top-scoreboard" onclick="toggleGraphic('top-scoreboard')">
                                    <i class="bi bi-eye"></i> ìƒë‹¨ ìŠ¤ì½”ì–´ë³´ë“œ
                                </button>
                            </div>
                            <div class="col-12 mb-2">
                                <button class="btn btn-outline-secondary btn-sm w-100" id="toggle-vs-graphic" onclick="toggleGraphic('vs')">
                                    <i class="bi bi-eye-slash"></i> VS ê·¸ë˜í”½
                                </button>
                            </div>
                            <div class="col-12 mb-2">
                                <button class="btn btn-outline-secondary btn-sm w-100" id="toggle-bottom-strip" onclick="toggleGraphic('bottom-strip')">
                                    <i class="bi bi-eye-slash"></i> í•˜ë‹¨ ìŠ¤íŠ¸ë¦½
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë¼ì¸ì—… ê´€ë¦¬ ì„¹ì…˜ -->
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-people-fill"></i> ë¼ì¸ì—… ê´€ë¦¬
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- í™ˆíŒ€ ë¼ì¸ì—… (ì¢Œì¸¡) -->
                            <div class="col-md-6">
                                <div class="lineup-section">
                                    <h6 class="text-primary mb-3">
                                        <i class="bi bi-house"></i> í™ˆíŒ€ ë¼ì¸ì—…
                                    </h6>
                                    
                                    <!-- ë¼ì¸ì—… ì…ë ¥ í¼ -->
                                    <div class="lineup-input-form mb-3">
                                        <label class="form-label">ë¼ì¸ì—… ì…ë ¥ (ë²ˆí˜¸ ì´ë¦„ í¬ì§€ì…˜)</label>
                                        <textarea class="form-control" id="homeLineupInput" rows="8" 
                                                  placeholder="1 ì´ìŠ¹ì—½ GK&#10;2 ê¹€ì² ìˆ˜ DF&#10;3 ë°•ë¯¼ìˆ˜ MF&#10;4 ì •ìš°ì§„ FW"></textarea>
                                        <small class="form-text text-muted">
                                            ê° ì¤„ë§ˆë‹¤ "ë²ˆí˜¸ ì´ë¦„ í¬ì§€ì…˜" í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.
                                        </small>
                                    </div>
                                    
                                    <!-- ë¼ì¸ì—… ì €ì¥ ë²„íŠ¼ -->
                                    <button type="button" class="btn btn-primary btn-sm" onclick="saveLineup('home')">
                                        <i class="bi bi-save"></i> í™ˆíŒ€ ë¼ì¸ì—… ì €ì¥
                                    </button>
                                </div>
                            </div>
                            
                            <!-- ì–´ì›¨ì´íŒ€ ë¼ì¸ì—… (ìš°ì¸¡) -->
                            <div class="col-md-6">
                                <div class="lineup-section">
                                    <h6 class="text-success mb-3">
                                        <i class="bi bi-arrow-right"></i> ì–´ì›¨ì´íŒ€ ë¼ì¸ì—…
                                    </h6>
                                    
                                    <!-- ë¼ì¸ì—… ì…ë ¥ í¼ -->
                                    <div class="lineup-input-form mb-3">
                                        <label class="form-label">ë¼ì¸ì—… ì…ë ¥ (ë²ˆí˜¸ ì´ë¦„ í¬ì§€ì…˜)</label>
                                        <textarea class="form-control" id="awayLineupInput" rows="8" 
                                                  placeholder="1 ê¹€ê³¨í‚¤ GK&#10;2 ì´ìˆ˜ë¹„ DF&#10;3 ë°•ë¯¸ë“œ MF&#10;4 ì •ê³µê²© FW"></textarea>
                                        <small class="form-text text-muted">
                                            ê° ì¤„ë§ˆë‹¤ "ë²ˆí˜¸ ì´ë¦„ í¬ì§€ì…˜" í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.
                                        </small>
                                    </div>
                                    
                                    <!-- ë¼ì¸ì—… ì €ì¥ ë²„íŠ¼ -->
                                    <button type="button" class="btn btn-success btn-sm" onclick="saveLineup('away')">
                                        <i class="bi bi-save"></i> ì–´ì›¨ì´íŒ€ ë¼ì¸ì—… ì €ì¥
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ì „ì²´ ë¼ì¸ì—… ì €ì¥ ë²„íŠ¼ -->
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-warning" onclick="saveAllLineup()">
                                <i class="bi bi-save2"></i> ì „ì²´ ë¼ì¸ì—… ì €ì¥
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë“ì  ì •ë³´ ì…ë ¥ ì„¹ì…˜ -->
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-trophy-fill"></i> ë“ì  ì •ë³´ ê´€ë¦¬
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- í™ˆíŒ€ ë“ì  ì •ë³´ (ì¢Œì¸¡) -->
                            <div class="col-md-6">
                                <div class="team-goals-section">
                                    <h6 class="text-primary mb-3">
                                        <i class="bi bi-house"></i> í™ˆíŒ€ ë“ì 
                                    </h6>
                                    
                                    <!-- ì…ë ¥ í¼ -->
                                    <div class="goal-input-form mb-3">
                                        <div class="row">
                                            <div class="col-8">
                                                <input type="text" class="form-control" id="home-player-input" placeholder="ì„ ìˆ˜ ì´ë¦„">
                                            </div>
                                            <div class="col-3">
                                                <input type="text" class="form-control" id="home-time-input" placeholder="ì‹œê°„ (ì˜ˆ: 15')">
                                            </div>
                                            <div class="col-1">
                                                <button class="btn btn-primary btn-sm" onclick="addHomeGoalFromInput()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ -->
                                    <div id="home-goals-list" class="goals-list">
                                        <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ë“ì  ì •ë³´ë“¤ -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ì–´ì›¨ì´íŒ€ ë“ì  ì •ë³´ (ìš°ì¸¡) -->
                            <div class="col-md-6">
                                <div class="team-goals-section">
                                    <h6 class="text-danger mb-3">
                                        <i class="bi bi-arrow-right"></i> ì–´ì›¨ì´íŒ€ ë“ì 
                                    </h6>
                                    
                                    <!-- ì…ë ¥ í¼ -->
                                    <div class="goal-input-form mb-3">
                                        <div class="row">
                                            <div class="col-8">
                                                <input type="text" class="form-control" id="away-player-input" placeholder="ì„ ìˆ˜ ì´ë¦„">
                                            </div>
                                            <div class="col-3">
                                                <input type="text" class="form-control" id="away-time-input" placeholder="ì‹œê°„ (ì˜ˆ: 15')">
                                            </div>
                                            <div class="col-1">
                                                <button class="btn btn-danger btn-sm" onclick="addAwayGoalFromInput()">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ -->
                                    <div id="away-goals-list" class="goals-list">
                                        <!-- ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ë“ì  ì •ë³´ë“¤ -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ì „ì—­ ë³€ìˆ˜
        const matchId = '<%= match.id %>';
        const socket = io();
        
        // ì†Œì¼“ ì—°ê²° ìƒíƒœ í™•ì¸
        socket.on('connect', function() {
            console.log('âœ… ì»¨íŠ¸ë¡¤ í˜ì´ì§€ ì†Œì¼“ ì—°ê²°ë¨');
            console.log('ì†Œì¼“ ID:', socket.id);
            updateConnectionStatus(true);
        });

        socket.on('disconnect', function() {
            console.log('âŒ ì»¨íŠ¸ë¡¤ í˜ì´ì§€ ì†Œì¼“ ì—°ê²° ëŠì–´ì§');
            updateConnectionStatus(false);
        });

        socket.on('connect_error', function(error) {
            console.error('âŒ ì»¨íŠ¸ë¡¤ í˜ì´ì§€ ì†Œì¼“ ì—°ê²° ì˜¤ë¥˜:', error);
            updateConnectionStatus(false);
        });

        // ì¬ì—°ê²° ì‹œë„ ë¡œì§
        socket.on('reconnect', function(attemptNumber) {
            console.log(`ğŸ”„ ì†Œì¼“ ì¬ì—°ê²° ì„±ê³µ (ì‹œë„ ${attemptNumber}ë²ˆì§¸)`);
            updateConnectionStatus(true);
            
            // ì¬ì—°ê²° ì‹œ í˜„ì¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ (ì„œë²„ì™€ ë™ê¸°í™”)
            console.log('=== ì¬ì—°ê²° í›„ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ===');
            socket.emit('request_timer_state', { matchId: matchId });
        });

        socket.on('reconnect_attempt', function(attemptNumber) {
            console.log(`ğŸ”„ ì†Œì¼“ ì¬ì—°ê²° ì‹œë„ ì¤‘... (${attemptNumber}ë²ˆì§¸)`);
            updateConnectionStatus(false);
        });

        socket.on('reconnect_error', function(error) {
            console.error('âŒ ì†Œì¼“ ì¬ì—°ê²° ì‹¤íŒ¨:', error);
            updateConnectionStatus(false);
        });

        socket.on('reconnect_failed', function() {
            console.error('âŒ ì†Œì¼“ ì¬ì—°ê²° ì™„ì „ ì‹¤íŒ¨');
            updateConnectionStatus(false);
        });
        
        // ì†Œì¼“ ì´ˆê¸°í™” ì§í›„ ìƒíƒœ í™•ì¸
        console.log('=== ì»¨íŠ¸ë¡¤ í˜ì´ì§€ ì†Œì¼“ ì´ˆê¸°í™” ì§í›„ ìƒíƒœ ===');
        console.log('socket.connected:', socket.connected);
        console.log('matchId:', matchId);
        
        
        // ========================================
        // ì™„ì „íˆ ìƒˆë¡œìš´ ë‹¨ìˆœí•œ íƒ€ì´ë¨¸ ì‹œìŠ¤í…œ
        // ========================================
        
        // íƒ€ì´ë¨¸ ìƒíƒœ (ì™„ì „ ë‹¨ìˆœí™”)
        let currentTime = 0;
        let isRunning = false;
        
        // ì†Œì¼“ ì—°ê²°
        socket.on('connect', function() {
            console.log('ì†Œì¼“ ì—°ê²°ë¨');
            socket.emit('join_match', { matchId: matchId });
            
            // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸
            updateConnectionStatus(true);
            
            // ì—°ê²° ì‹œ í˜„ì¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ (ì¬ì—°ê²° ì‹œ ì •í™•í•œ ë™ê¸°í™”)
            console.log('=== íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ===');
            console.log('ìš”ì²­í•  matchId:', matchId);
            socket.emit('request_timer_state', { matchId: matchId });
            
            // ì¶”ê°€: í˜ì´ì§€ ë¡œë“œ ì‹œì—ë„ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­
            setTimeout(() => {
                console.log('=== ì¶”ê°€ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ (3ì´ˆ í›„) ===');
                socket.emit('request_timer_state', { matchId: matchId });
            }, 3000);
        });

        socket.on('disconnect', function() {
            console.log('ì„œë²„ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.');
            updateConnectionStatus(false);
        });
        
        // ë“ì  ì •ë³´ ë¡œë“œ ì‘ë‹µ ì´ë²¤íŠ¸
        socket.on('goalsLoaded', function(data) {
            console.log('=== ì„œë²„ì—ì„œ ë“ì  ì •ë³´ ìˆ˜ì‹  ===');
            console.log('ìˆ˜ì‹ ëœ ë“ì  ì •ë³´:', data);
            
            if (data.goals) {
                // í™ˆíŒ€ ë“ì  ì •ë³´ë¥¼ ë°°ì—´ì— ì €ì¥
                homeGoals = [];
                if (data.goals.home && data.goals.home.length > 0) {
                    data.goals.home.forEach((goal, index) => {
                        const goalId = `home_goal_${++goalIdCounter}`;
                        homeGoals.push({
                            id: goalId,
                            player: goal.player,
                            time: goal.time
                        });
                    });
                }
                
                // ì–´ì›¨ì´íŒ€ ë“ì  ì •ë³´ë¥¼ ë°°ì—´ì— ì €ì¥
                awayGoals = [];
                if (data.goals.away && data.goals.away.length > 0) {
                    data.goals.away.forEach((goal, index) => {
                        const goalId = `away_goal_${++goalIdCounter}`;
                        awayGoals.push({
                            id: goalId,
                            player: goal.player,
                            time: goal.time
                        });
                    });
                }
                
                // UI ì—…ë°ì´íŠ¸
                renderHomeGoalsList();
                renderAwayGoalsList();
                
                console.log('âœ… ë“ì  ì •ë³´ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } else {
                console.log('ì €ì¥ëœ ë“ì  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                homeGoals = [];
                awayGoals = [];
                renderHomeGoalsList();
                renderAwayGoalsList();
            }
        });
        
        // ê²½ê¸° ë°ì´í„° ë¡œë“œ ì‘ë‹µ ì´ë²¤íŠ¸
        socket.on('matchDataLoaded', function(data) {
            console.log('=== ì„œë²„ì—ì„œ ê²½ê¸° ë°ì´í„° ìˆ˜ì‹  ===');
            console.log('ìˆ˜ì‹ ëœ ê²½ê¸° ë°ì´í„°:', data);
            
            if (data) {
                // ì ìˆ˜ ì •ë³´ ì—…ë°ì´íŠ¸
                if (data.home_score !== undefined) {
                    document.getElementById('home-score').value = data.home_score;
                    console.log('í™ˆíŒ€ ì ìˆ˜ ë¡œë“œ:', data.home_score);
                }
                if (data.away_score !== undefined) {
                    document.getElementById('away-score').value = data.away_score;
                    console.log('ì–´ì›¨ì´íŒ€ ì ìˆ˜ ë¡œë“œ:', data.away_score);
                }
                
                // íŒ€ëª… ì •ë³´ ì—…ë°ì´íŠ¸
                if (data.home_team) {
                    document.getElementById('home-team-name').value = data.home_team;
                    console.log('í™ˆíŒ€ ì´ë¦„ ë¡œë“œ:', data.home_team);
                }
                if (data.away_team) {
                    document.getElementById('away-team-name').value = data.away_team;
                    console.log('ì–´ì›¨ì´íŒ€ ì´ë¦„ ë¡œë“œ:', data.away_team);
                }
                
                // íŒ€ ì»¬ëŸ¬ ì •ë³´ ì—…ë°ì´íŠ¸
                if (data.home_team_color) {
                    document.getElementById('home-team-color').value = data.home_team_color;
                    console.log('í™ˆíŒ€ ì»¬ëŸ¬ ë¡œë“œ:', data.home_team_color);
                }
                if (data.away_team_color) {
                    document.getElementById('away-team-color').value = data.away_team_color;
                    console.log('ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬ ë¡œë“œ:', data.away_team_color);
                }
                
                console.log('âœ… ê²½ê¸° ë°ì´í„° UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            } else {
                console.log('ê²½ê¸° ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
            }
        });
        
        // ë“ì  ì •ë³´ ì €ì¥ ì„±ê³µ ì‘ë‹µ ì´ë²¤íŠ¸
        socket.on('goalsSaved', function(data) {
            console.log('=== ë“ì  ì •ë³´ ì €ì¥ ì„±ê³µ ===');
            console.log('ì„œë²„ ì‘ë‹µ:', data);
            if (data.success) {
                console.log('âœ… ë“ì  ì •ë³´ DB ì €ì¥ ì™„ë£Œ');
            }
        });
        
        // ë“ì  ì •ë³´ ì €ì¥ ì‹¤íŒ¨ ì‘ë‹µ ì´ë²¤íŠ¸
        socket.on('goalsSaveError', function(data) {
            console.error('=== ë“ì  ì •ë³´ ì €ì¥ ì‹¤íŒ¨ ===');
            console.error('ì„œë²„ ì˜¤ë¥˜:', data.error);
            alert('ë“ì  ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + data.error);
        });


        // ì™„ì „íˆ ìƒˆë¡œìš´ ë‹¨ìˆœí•œ íƒ€ì´ë¨¸ ì œì–´ í•¨ìˆ˜ë“¤
        function startTimer() {
            console.log('íƒ€ì´ë¨¸ ì‹œì‘ ìš”ì²­');
            socket.emit('timer_control', { matchId: matchId, action: 'start' });
        }

        function stopTimer() {
            console.log('íƒ€ì´ë¨¸ ì •ì§€ ìš”ì²­');
            socket.emit('timer_control', { matchId: matchId, action: 'stop' });
        }

        function resetTimer() {
            console.log('íƒ€ì´ë¨¸ ë¦¬ì…‹ ìš”ì²­');
            socket.emit('timer_control', { matchId: matchId, action: 'reset' });
        }

        // ì‹œê°„ ìˆ˜ì • í† ê¸€ (ì„œë²„ ì¤‘ì‹¬)
        function toggleTimeEdit() {
            const timeEditContainer = document.getElementById('time-edit-container');
            const timeEditInput = document.getElementById('time-edit-input');
            
            const minutes = Math.floor(currentTime / 60);
            const seconds = currentTime % 60;
            timeEditInput.value = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeEditContainer.style.display === 'none') {
                timeEditContainer.style.display = 'block';
                timeEditInput.focus();
                timeEditInput.select();
            } else {
                timeEditContainer.style.display = 'none';
            }
        }
        

        // ê²½ê¸° ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (WebSocket ë°©ì‹)
        function loadMatchData() {
            try {
                console.log('=== ê²½ê¸° ë°ì´í„° ë¡œë“œ ì‹œì‘ (WebSocket ë°©ì‹) ===');
                console.log('matchId:', matchId);
                
                // WebSocketì„ í†µí•´ ì„œë²„ì—ì„œ ê²½ê¸° ë°ì´í„° ìš”ì²­
                socket.emit('loadMatchData', {
                    matchId: matchId
                });
                
                console.log('âœ… ê²½ê¸° ë°ì´í„° ë¡œë“œ ìš”ì²­ ì „ì†¡ ì™„ë£Œ');
            } catch (error) {
                console.error('ê²½ê¸° ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            }
        }

        // ì™„ì „íˆ ìƒˆë¡œìš´ ë‹¨ìˆœí•œ íƒ€ì´ë¨¸ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateTimerDisplay() {
            const minutes = Math.floor(currentTime / 60);
            const seconds = currentTime % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer-display').textContent = display;
            console.log('íƒ€ì´ë¨¸ í‘œì‹œ ì—…ë°ì´íŠ¸:', display);
        }

        // íƒ€ì´ë¨¸ ìƒíƒœ ì €ì¥ í•¨ìˆ˜ (ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ + DB ì €ì¥)
        function saveTimerState() {
            const stateToSave = {
                currentSeconds: timerState.currentSeconds,
                isRunning: timerState.isRunning,
                startTime: timerState.startTime,
                pausedTime: timerState.pausedTime,
                lastSaveTime: Date.now()
            };
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem(`timer_state_${matchId}`, JSON.stringify(stateToSave));
            console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ì €ì¥ë¨ (localStorage):', stateToSave);
            
            // ì„œë²„ì— ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ì €ì¥ ìš”ì²­
            socket.emit('save_local_timer_state', {
                matchId: matchId,
                timerState: stateToSave
            });
        }

        // ì™„ì „íˆ ìƒˆë¡œìš´ ë‹¨ìˆœí•œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ
        let timerInterval = null;
        
        function startLocalTimer() {
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if (isRunning) {
                    currentTime++;
                    updateTimerDisplay();
                }
            }, 1000);
            console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ì‹œì‘');
        }
        
        function stopLocalTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ì •ì§€');
        }

        // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateConnectionStatus(connected) {
            const indicator = document.getElementById('connection-indicator');
            const text = document.getElementById('connection-text');
            
            if (connected) {
                indicator.className = 'status-indicator connected';
                text.textContent = 'ì„œë²„ ì—°ê²°ë¨';
            } else {
                indicator.className = 'status-indicator disconnected';
                text.textContent = 'ì„œë²„ ì—°ê²° ëŠê¹€';
            }
        }

        // íŒ€ ìœ„ì¹˜ ë³€ê²½ í•¨ìˆ˜
        async function swapTeams() {
            if (!confirm('í™ˆíŒ€ê³¼ ì–´ì›¨ì´íŒ€ì˜ ì •ë³´ë¥¼ ì„œë¡œ ë°”ê¾¸ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            try {
                console.log('=== íŒ€ ìœ„ì¹˜ ë³€ê²½ ì‹œì‘ ===');
                
                // ì„œë²„ì— ìœ„ì¹˜ ë³€ê²½ ìš”ì²­
                const response = await fetch(`/api/matches/${matchId}/swap-teams`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!response.ok) {
                    throw new Error('íŒ€ ìœ„ì¹˜ ë³€ê²½ ì‹¤íŒ¨');
                }
                
                const result = await response.json();
                if (!result.success) {
                    throw new Error(result.error || 'íŒ€ ìœ„ì¹˜ ë³€ê²½ ì‹¤íŒ¨');
                }
                
                console.log('íŒ€ ìœ„ì¹˜ ë³€ê²½ API í˜¸ì¶œ ì„±ê³µ');
                
                // ì¦‰ì‹œ UI ì—…ë°ì´íŠ¸ (ìƒˆë¡œê³ ì¹¨ ì—†ì´)
                await updateTeamsAfterSwap();
                
                // ì„±ê³µ ë©”ì‹œì§€
                alert('íŒ€ ìœ„ì¹˜ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.');
                
                console.log('íŒ€ ìœ„ì¹˜ ë³€ê²½ ì™„ë£Œ');
                
            } catch (error) {
                console.error('íŒ€ ìœ„ì¹˜ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                alert('íŒ€ ìœ„ì¹˜ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ìŠ¹ë¶€ì°¨ê¸° ì ìˆ˜ ê´€ë¦¬
        let currentPenaltyText = '0 (ìŠ¹ë¶€ì°¨ê¸°) 0';
        
        function updatePenaltyScore(team, change) {
            console.log('=== ìŠ¹ë¶€ì°¨ê¸° ì ìˆ˜ ì—…ë°ì´íŠ¸ (ì‹¤ì‹œê°„ ë°˜ì˜) ===');
            console.log('team:', team, 'change:', change);
            
            // ì •ê·œì‹ìœ¼ë¡œ í™ˆíŒ€ê³¼ ì–´ì›¨ì´íŒ€ ì ìˆ˜ ì¶”ì¶œ
            const match = currentPenaltyText.match(/(\d+)\s*\(ìŠ¹ë¶€ì°¨ê¸°\)\s*(\d+)/);
            if (!match) {
                console.log('ìŠ¹ë¶€ì°¨ê¸° í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                return;
            }
            
            let homeScore = parseInt(match[1]);
            let awayScore = parseInt(match[2]);
            
            // ì ìˆ˜ ì—…ë°ì´íŠ¸
            if (team === 'home') {
                homeScore = Math.max(0, homeScore + change);
            } else if (team === 'away') {
                awayScore = Math.max(0, awayScore + change);
            }
            
            console.log('ì—…ë°ì´íŠ¸ëœ ì ìˆ˜ - í™ˆ:', homeScore, 'ì–´ì›¨ì´:', awayScore);
            
            // ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ ìƒì„±
            const newText = `${homeScore} (ìŠ¹ë¶€ì°¨ê¸°) ${awayScore}`;
            console.log('ìƒˆë¡œìš´ í…ìŠ¤íŠ¸:', newText);
            
            // í˜„ì¬ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            currentPenaltyText = newText;
            document.getElementById('penalty-text-display').textContent = newText;
            
            // ì„œë²„ì— ì €ì¥ (ëª¨ë°”ì¼ê³¼ ë™ì¼)
            savePenaltyScoreToServer(newText);
            
            // ì‹¤ì‹œê°„ ë™ê¸°í™” (ëª¨ë°”ì¼ê³¼ ë™ì¼)
            socket.emit('updateExtraBoxText', {
                matchId: matchId,
                text: newText
            });
            
            console.log('ìŠ¹ë¶€ì°¨ê¸° ì ìˆ˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë° ì €ì¥ ì™„ë£Œ');
        }

        // ìŠ¹ë¶€ì°¨ê¸° ì„œë²„ ì €ì¥ í•¨ìˆ˜ (ëª¨ë°”ì¼ê³¼ ë™ì¼)
        async function savePenaltyScoreToServer(text) {
            try {
                console.log('=== ìŠ¹ë¶€ì°¨ê¸° ì„œë²„ ì €ì¥ ===');
                const response = await fetch('/api/extra-box-text', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        matchId: matchId,
                        sportType: 'soccer',
                        text: text
                    })
                });
                
                const data = await response.json();
                if (data.success) {
                    console.log('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ì„œë²„ ì €ì¥ ì™„ë£Œ:', text);
            } else {
                    console.error('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ì„œë²„ ì €ì¥ ì‹¤íŒ¨:', data.error);
                }
            } catch (error) {
                console.error('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ì„œë²„ ì €ì¥ ì˜¤ë¥˜:', error);
            }
        }


        // ìŠ¹ë¶€ì°¨ê¸° í‘œì‹œ í† ê¸€ í•¨ìˆ˜ (ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ê³¼ ë™ì¼)
        function togglePenaltyDisplay() {
            console.log('=== ìŠ¹ë¶€ì°¨ê¸° í‘œì‹œ í† ê¸€ ë²„íŠ¼ í´ë¦­ ===');
            
            // ì„œë²„ì— ìŠ¹ë¶€ì°¨ê¸° í‘œì‹œ í† ê¸€ ìš”ì²­
            socket.emit('toggleExtraBox', {
                matchId: matchId
            });
            
            // ë²„íŠ¼ ìƒíƒœ ë³€ê²½ í”¼ë“œë°±
            const toggleButton = event.target.closest('button');
            const originalHTML = toggleButton.innerHTML;
            
            if (toggleButton.innerHTML.includes('í‘œì‹œ')) {
                toggleButton.innerHTML = '<i class="bi bi-eye-slash"></i> ìˆ¨ê¹€';
                toggleButton.classList.remove('btn-info');
                toggleButton.classList.add('btn-warning');
            } else {
                toggleButton.innerHTML = '<i class="bi bi-eye"></i> í‘œì‹œ';
                toggleButton.classList.remove('btn-warning');
                toggleButton.classList.add('btn-info');
            }
            
            console.log('ìŠ¹ë¶€ì°¨ê¸° í‘œì‹œ í† ê¸€ ìš”ì²­ ì „ì†¡ ì™„ë£Œ');
        }

        // ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ í•¨ìˆ˜
        async function loadPenaltyText() {
            try {
                console.log('=== ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ ì‹œì‘ ===');
                
                const response = await fetch(`/api/extra-box-text/soccer/${matchId}`);
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.text) {
                        currentPenaltyText = data.text;
                        document.getElementById('penalty-text-display').textContent = data.text;
                        console.log('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ ì„±ê³µ:', data.text);
            } else {
                        console.log('ì €ì¥ëœ ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ê°’ ì‚¬ìš©');
                    }
            } else {
                    console.log('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ ì‹¤íŒ¨, ê¸°ë³¸ê°’ ì‚¬ìš©');
                    }
                } catch (error) {
                console.error('ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            }
        }

        // ëŒ€íšŒëª… ë¡œë“œ í•¨ìˆ˜
        async function loadTournamentText() {
            try {
                console.log('=== ëŒ€íšŒëª… ë¡œë“œ ì‹œì‘ ===');
                console.log('matchId:', matchId);
                console.log('API URL:', `/api/tournament-text/${matchId}`);
                
                const response = await fetch(`/api/tournament-text/${matchId}`);
                console.log('API ì‘ë‹µ ìƒíƒœ:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('API ì‘ë‹µ ë°ì´í„°:', data);
                    
                    if (data.success && data.tournamentText !== undefined) {
                        const tournamentTextElement = document.getElementById('tournamentText');
                        console.log('ëŒ€íšŒëª… í…ìŠ¤íŠ¸ ë°•ìŠ¤ ì—˜ë¦¬ë¨¼íŠ¸:', tournamentTextElement);
                        
                        if (tournamentTextElement) {
                            tournamentTextElement.value = data.tournamentText || '';
                            console.log('ëŒ€íšŒëª… ë¡œë“œ ì„±ê³µ:', data.tournamentText);
                            console.log('í…ìŠ¤íŠ¸ ë°•ìŠ¤ ê°’ ì„¤ì • í›„:', tournamentTextElement.value);
                        } else {
                            console.error('ëŒ€íšŒëª… í…ìŠ¤íŠ¸ ë°•ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        }
                    } else {
                        console.log('ì €ì¥ëœ ëŒ€íšŒëª…ì´ ì—†ìŠµë‹ˆë‹¤. ì‘ë‹µ ë°ì´í„°:', data);
                    }
                } else {
                    console.log('ëŒ€íšŒëª… ë¡œë“œ ì‹¤íŒ¨. ì‘ë‹µ ìƒíƒœ:', response.status);
                    const errorText = await response.text();
                    console.log('ì˜¤ë¥˜ ì‘ë‹µ:', errorText);
                }
            } catch (error) {
                console.error('ëŒ€íšŒëª… ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            }
        }

        // ë“ì  ì •ë³´ ê´€ë¦¬ í•¨ìˆ˜ë“¤
        let homeGoals = [];
        let awayGoals = [];
        let goalIdCounter = 0;

        // í™ˆíŒ€ ë“ì  ì¶”ê°€ (ìƒˆë¡œìš´ ì…ë ¥ ë°©ì‹)
        async function addHomeGoalFromInput() {
            const playerInput = document.getElementById('home-player-input');
            const timeInput = document.getElementById('home-time-input');
            
            const player = playerInput.value.trim();
            const time = timeInput.value.trim();
            
            if (!player || !time) {
                alert('ì„ ìˆ˜ ì´ë¦„ê³¼ ì‹œê°„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const goalId = `home_goal_${++goalIdCounter}`;
            const goal = { id: goalId, player, time };
            
            homeGoals.push(goal);
            renderHomeGoalsList();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            playerInput.value = '';
            timeInput.value = '';
            
            console.log('í™ˆíŒ€ ë“ì  ì¶”ê°€:', goal);
            
            // ìë™ìœ¼ë¡œ ì„œë²„ì— ì €ì¥
            await saveGoalsToServer();
        }

        // ì–´ì›¨ì´íŒ€ ë“ì  ì¶”ê°€ (ìƒˆë¡œìš´ ì…ë ¥ ë°©ì‹)
        async function addAwayGoalFromInput() {
            const playerInput = document.getElementById('away-player-input');
            const timeInput = document.getElementById('away-time-input');
            
            const player = playerInput.value.trim();
            const time = timeInput.value.trim();
            
            if (!player || !time) {
                alert('ì„ ìˆ˜ ì´ë¦„ê³¼ ì‹œê°„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const goalId = `away_goal_${++goalIdCounter}`;
            const goal = { id: goalId, player, time };
            
            awayGoals.push(goal);
            renderAwayGoalsList();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            playerInput.value = '';
            timeInput.value = '';
            
            console.log('ì–´ì›¨ì´íŒ€ ë“ì  ì¶”ê°€:', goal);
            
            // ìë™ìœ¼ë¡œ ì„œë²„ì— ì €ì¥
            await saveGoalsToServer();
        }
        
        // í™ˆíŒ€ ë“ì  ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderHomeGoalsList() {
            const container = document.getElementById('home-goals-list');
            container.innerHTML = '';
            
            if (homeGoals.length === 0) {
                container.innerHTML = '<div class="text-muted text-center py-3">ë“±ë¡ëœ ë“ì ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            homeGoals.forEach(goal => {
                const goalItem = document.createElement('div');
                goalItem.className = 'goal-item';
                goalItem.innerHTML = `
                    <input type="text" class="form-control goal-player-input" value="${goal.player}" 
                           data-goal-id="${goal.id}" data-field="player" placeholder="ì„ ìˆ˜ ì´ë¦„">
                    <input type="text" class="form-control goal-time-input" value="${goal.time}" 
                           data-goal-id="${goal.id}" data-field="time" placeholder="ì‹œê°„">
                    <button class="btn btn-outline-danger btn-sm" onclick="removeHomeGoal('${goal.id}')">
                        <i class="bi bi-trash"></i>
                    </button>
                `;
                container.appendChild(goalItem);
            });
            
            // í¸ì§‘ ê°€ëŠ¥í•œ ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            addGoalEditListeners();
        }
        
        // ì–´ì›¨ì´íŒ€ ë“ì  ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderAwayGoalsList() {
            const container = document.getElementById('away-goals-list');
            container.innerHTML = '';
            
            if (awayGoals.length === 0) {
                container.innerHTML = '<div class="text-muted text-center py-3">ë“±ë¡ëœ ë“ì ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            awayGoals.forEach(goal => {
                const goalItem = document.createElement('div');
                goalItem.className = 'goal-item';
                goalItem.innerHTML = `
                    <input type="text" class="form-control goal-player-input" value="${goal.player}" 
                           data-goal-id="${goal.id}" data-field="player" placeholder="ì„ ìˆ˜ ì´ë¦„">
                    <input type="text" class="form-control goal-time-input" value="${goal.time}" 
                           data-goal-id="${goal.id}" data-field="time" placeholder="ì‹œê°„">
                    <button class="btn btn-outline-danger btn-sm" onclick="removeAwayGoal('${goal.id}')">
                        <i class="bi bi-trash"></i>
                    </button>
                `;
                container.appendChild(goalItem);
            });
            
            // í¸ì§‘ ê°€ëŠ¥í•œ ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            addGoalEditListeners();
        }
        
        // í™ˆíŒ€ ë“ì  ì œê±°
        async function removeHomeGoal(goalId) {
            homeGoals = homeGoals.filter(goal => goal.id !== goalId);
            renderHomeGoalsList();
            console.log('í™ˆíŒ€ ë“ì  ì œê±°:', goalId);
            
            // ìë™ìœ¼ë¡œ ì„œë²„ì— ì €ì¥
            await saveGoalsToServer();
        }
        
        // ì–´ì›¨ì´íŒ€ ë“ì  ì œê±°
        async function removeAwayGoal(goalId) {
            awayGoals = awayGoals.filter(goal => goal.id !== goalId);
            renderAwayGoalsList();
            console.log('ì–´ì›¨ì´íŒ€ ë“ì  ì œê±°:', goalId);
            
            // ìë™ìœ¼ë¡œ ì„œë²„ì— ì €ì¥
            await saveGoalsToServer();
        }

        // ë“ì  ì •ë³´ ìˆ˜ì§‘ (ìƒˆë¡œìš´ ë°©ì‹)
        function collectGoals() {
            // ì´ë¯¸ homeGoals, awayGoals ë°°ì—´ì— ì €ì¥ë˜ì–´ ìˆìŒ
            console.log('ìˆ˜ì§‘ëœ í™ˆíŒ€ ë“ì :', homeGoals);
            console.log('ìˆ˜ì§‘ëœ ì–´ì›¨ì´íŒ€ ë“ì :', awayGoals);
        }
        
        // í¸ì§‘ ê°€ëŠ¥í•œ ì…ë ¥ í•„ë“œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        function addGoalEditListeners() {
            // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¤‘ë³µ ë°©ì§€)
            document.querySelectorAll('.goal-player-input, .goal-time-input').forEach(input => {
                input.removeEventListener('blur', handleGoalEdit);
                input.removeEventListener('keypress', handleGoalKeypress);
            });
            
            // ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            document.querySelectorAll('.goal-player-input, .goal-time-input').forEach(input => {
                input.addEventListener('blur', handleGoalEdit);
                input.addEventListener('keypress', handleGoalKeypress);
            });
        }
        
        // ë“ì  ì •ë³´ í¸ì§‘ ì²˜ë¦¬
        async function handleGoalEdit(event) {
            const input = event.target;
            const goalId = input.getAttribute('data-goal-id');
            const field = input.getAttribute('data-field');
            const newValue = input.value.trim();
            
            console.log(`ë“ì  ì •ë³´ í¸ì§‘: ${goalId} - ${field} = ${newValue}`);
            
            // í™ˆíŒ€ ë“ì  ì •ë³´ ì—…ë°ì´íŠ¸
            const homeGoal = homeGoals.find(goal => goal.id === goalId);
            if (homeGoal) {
                homeGoal[field] = newValue;
                console.log('í™ˆíŒ€ ë“ì  ì •ë³´ ì—…ë°ì´íŠ¸:', homeGoal);
                await saveGoalsToServer();
                return;
            }
            
            // ì–´ì›¨ì´íŒ€ ë“ì  ì •ë³´ ì—…ë°ì´íŠ¸
            const awayGoal = awayGoals.find(goal => goal.id === goalId);
            if (awayGoal) {
                awayGoal[field] = newValue;
                console.log('ì–´ì›¨ì´íŒ€ ë“ì  ì •ë³´ ì—…ë°ì´íŠ¸:', awayGoal);
                await saveGoalsToServer();
                return;
            }
        }
        
        // ì—”í„° í‚¤ ì²˜ë¦¬
        function handleGoalKeypress(event) {
            if (event.key === 'Enter') {
                event.target.blur(); // í¬ì»¤ìŠ¤ í•´ì œí•˜ì—¬ ìë™ ì €ì¥ íŠ¸ë¦¬ê±°
            }
        }

        // ë“ì  ì •ë³´ ì„œë²„ ì €ì¥
        async function saveGoalsToServer() {
            try {
                console.log('=== ë“ì  ì •ë³´ ì„œë²„ ì €ì¥ ì‹œì‘ ===');
                
                // ë“ì  ì •ë³´ ìˆ˜ì§‘
                collectGoals();
                
                // WebSocketì„ í†µí•´ ì„œë²„ì— ì§ì ‘ ë“ì  ì •ë³´ ì €ì¥ ìš”ì²­
                console.log('=== WebSocketì„ í†µí•œ ë“ì  ì •ë³´ ì €ì¥ ===');
                console.log('í™ˆíŒ€ ë“ì :', homeGoals);
                console.log('ì–´ì›¨ì´íŒ€ ë“ì :', awayGoals);
                
                // WebSocket ì´ë²¤íŠ¸ë¡œ ë“ì  ì •ë³´ ì €ì¥ ìš”ì²­
                socket.emit('saveGoals', {
                    matchId: matchId,
                    homeGoals: homeGoals,
                    awayGoals: awayGoals
                });
                
                console.log('âœ… ë“ì  ì •ë³´ ì €ì¥ ìš”ì²­ ì „ì†¡ ì™„ë£Œ');
            } catch (error) {
                console.error('ë“ì  ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜:', error);
                alert('ë“ì  ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì €ì¥ëœ ë“ì  ì •ë³´ ë¡œë“œ (DBì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°)
        async function loadGoalsFromServer() {
            try {
                console.log('=== ì €ì¥ëœ ë“ì  ì •ë³´ ë¡œë“œ ì‹œì‘ ===');
                
                // WebSocketì„ í†µí•´ ì„œë²„ì—ì„œ ë“ì  ì •ë³´ ìš”ì²­
                console.log('=== WebSocketì„ í†µí•œ ë“ì  ì •ë³´ ë¡œë“œ ===');
                
                // WebSocket ì´ë²¤íŠ¸ë¡œ ë“ì  ì •ë³´ ìš”ì²­
                socket.emit('loadGoals', {
                    matchId: matchId
                });
                
                console.log('âœ… ë“ì  ì •ë³´ ë¡œë“œ ìš”ì²­ ì „ì†¡ ì™„ë£Œ');
            } catch (error) {
                console.error('ë“ì  ì •ë³´ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);
                homeGoals = [];
                awayGoals = [];
                renderHomeGoalsList();
                renderAwayGoalsList();
            }
        }

        // ê·¸ë˜í”½ í† ê¸€ í•¨ìˆ˜
        function toggleGraphic(graphicType) {
            console.log(`=== ê·¸ë˜í”½ í† ê¸€: ${graphicType} ===`);
            
            // graphicTypeì— ë”°ë¼ ì˜¬ë°”ë¥¸ ë²„íŠ¼ ID ë§¤í•‘
            let buttonId;
            switch (graphicType) {
                case 'top-scoreboard':
                    buttonId = 'toggle-top-scoreboard';
                    break;
                case 'vs':
                    buttonId = 'toggle-vs-graphic';
                    break;
                case 'bottom-strip':
                    buttonId = 'toggle-bottom-strip';
                    break;
                default:
                    console.error('ì•Œ ìˆ˜ ì—†ëŠ” ê·¸ë˜í”½ íƒ€ì…:', graphicType);
                    return;
            }
            
            const button = document.getElementById(buttonId);
            if (!button) {
                console.error(`ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${buttonId}`);
                return;
            }
            
            const isVisible = button.classList.contains('btn-success');
            const newState = !isVisible;
            
            console.log('í˜„ì¬ ìƒíƒœ:', isVisible ? 'í‘œì‹œ' : 'ìˆ¨ê¹€');
            console.log('ìƒˆë¡œìš´ ìƒíƒœ:', newState ? 'í‘œì‹œ' : 'ìˆ¨ê¹€');
            
            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            if (newState) {
                button.classList.remove('btn-outline-secondary');
                button.classList.add('btn-success');
                button.innerHTML = `<i class="bi bi-eye"></i> ${getGraphicName(graphicType)}`;
            } else {
                button.classList.remove('btn-success');
                button.classList.add('btn-outline-secondary');
                button.innerHTML = `<i class="bi bi-eye-slash"></i> ${getGraphicName(graphicType)}`;
            }
            
            // WebSocket ì´ë²¤íŠ¸ ì „ì†¡
            const eventData = {
                matchId: matchId,
                graphicType: graphicType,
                visible: newState
            };
            
            // VS ê·¸ë˜í”½ì´ë‚˜ í•˜ë‹¨ ìŠ¤íŠ¸ë¦½ì´ í‘œì‹œë  ë•Œ ëŒ€íšŒëª… ìë™ ì ìš©
            if ((graphicType === 'vs' || graphicType === 'bottom-strip') && newState) {
                console.log(`=== ${graphicType} í† ê¸€: ëŒ€íšŒëª… ìë™ ì ìš© ===`);
                applyTournamentTextAutomatically();
            }
            
            // í•˜ë‹¨ ìŠ¤íŠ¸ë¦½ì˜ ê²½ìš° DBì—ì„œ ìµœì‹  ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì „ì†¡
            if (graphicType === 'bottom-strip' && newState) {
                console.log('=== í•˜ë‹¨ ìŠ¤íŠ¸ë¦½ í† ê¸€: DBì—ì„œ ìµœì‹  ë°ì´í„° ë¡œë“œ ===');
                
                // WebSocketì„ í†µí•´ ì„œë²„ì—ì„œ ìµœì‹  ê²½ê¸° ë°ì´í„°ì™€ ë“ì  ì •ë³´ ìš”ì²­
                socket.emit('loadMatchData', { matchId: matchId });
                socket.emit('loadGoals', { matchId: matchId });
                
                // ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì€ í›„ í† ê¸€ ì´ë²¤íŠ¸ ì „ì†¡
                socket.once('matchDataLoaded', function(matchData) {
                    socket.once('goalsLoaded', function(goalsData) {
                        console.log('=== ì„œë²„ì—ì„œ ìµœì‹  ë°ì´í„° ìˆ˜ì‹  ì™„ë£Œ ===');
                        console.log('ê²½ê¸° ë°ì´í„°:', matchData);
                        console.log('ë“ì  ì •ë³´:', goalsData);
                        
                        // ìµœì‹  ìŠ¤ì½”ì–´ ì •ë³´ ì¶”ê°€
                        if (matchData) {
                            eventData.score = {
                                home: matchData.home_score || 0,
                                away: matchData.away_score || 0
                            };
                        }
                        
                        // ìµœì‹  ë“ì  ì •ë³´ ì¶”ê°€
                        if (goalsData && goalsData.goals) {
                            eventData.goals = {
                                home: goalsData.goals.home || [],
                                away: goalsData.goals.away || []
                            };
                        } else {
                            eventData.goals = {
                                home: [],
                                away: []
                            };
                        }
                        
                        console.log('í•˜ë‹¨ ìŠ¤íŠ¸ë¦½ê³¼ í•¨ê»˜ ì „ì†¡í•  ë°ì´í„°:', eventData);
                        
                        // WebSocket ì´ë²¤íŠ¸ ì „ì†¡
                        socket.emit('toggleGraphic', eventData);
                        console.log(`âœ… ì»¨íŠ¸ë¡¤: ê·¸ë˜í”½ í† ê¸€ ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ: ${graphicType} = ${newState}`);
                    });
                });
                return; // ì—¬ê¸°ì„œ í•¨ìˆ˜ ì¢…ë£Œ
            }
            
            console.log('=== ì»¨íŠ¸ë¡¤: WebSocket ì´ë²¤íŠ¸ ì „ì†¡ ===');
            console.log('socket.connected:', socket.connected);
            console.log('ì „ì†¡í•  ë°ì´í„°:', eventData);
            console.log('ì´ë²¤íŠ¸ ì „ì†¡ ì‹œê°„:', new Date().toISOString());
            
            socket.emit('toggleGraphic', eventData);
            
            console.log(`âœ… ì»¨íŠ¸ë¡¤: ê·¸ë˜í”½ í† ê¸€ ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ: ${graphicType} = ${newState}`);
        }
        
        // ê·¸ë˜í”½ ì´ë¦„ ë°˜í™˜ í•¨ìˆ˜
        function getGraphicName(graphicType) {
            const names = {
                'top-scoreboard': 'ìƒë‹¨ ìŠ¤ì½”ì–´ë³´ë“œ',
                'vs': 'VS ê·¸ë˜í”½',
                'bottom-strip': 'í•˜ë‹¨ ìŠ¤íŠ¸ë¦½'
            };
            return names[graphicType] || graphicType;
        }

        // ëŒ€íšŒëª… ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateTournamentText() {
            const tournamentText = document.getElementById('tournamentText').value.trim();
            console.log('=== ëŒ€íšŒëª… ì—…ë°ì´íŠ¸ ===');
            console.log('ì…ë ¥ëœ ëŒ€íšŒëª…:', tournamentText);
            
            if (!tournamentText) {
                alert('ëŒ€íšŒëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // WebSocketì„ í†µí•´ ëŒ€íšŒëª… ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡
            socket.emit('updateTournamentText', {
                matchId: matchId,
                tournamentText: tournamentText
            });
            
            console.log('âœ… ëŒ€íšŒëª… ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
        }

        // ëŒ€íšŒëª… ìë™ ì ìš© í•¨ìˆ˜
        function applyTournamentTextAutomatically() {
            const tournamentText = document.getElementById('tournamentText').value.trim();
            console.log('=== ëŒ€íšŒëª… ìë™ ì ìš© ===');
            console.log('í˜„ì¬ ëŒ€íšŒëª…:', tournamentText);
            
            if (tournamentText) {
                // WebSocketì„ í†µí•´ ëŒ€íšŒëª… ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡
                socket.emit('updateTournamentText', {
                    matchId: matchId,
                    tournamentText: tournamentText
                });
                console.log('âœ… ëŒ€íšŒëª… ìë™ ì ìš© ì™„ë£Œ');
            } else {
                console.log('ëŒ€íšŒëª…ì´ ë¹„ì–´ìˆì–´ ìë™ ì ìš©í•˜ì§€ ì•ŠìŒ');
            }
        }

        // ì¤‘ë³µëœ íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸ ë£¨í”„ ì œê±°ë¨ - startLocalTimer()ì—ì„œ ì²˜ë¦¬

        // ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateScore(team, change) {
            console.log(`=== ${team}íŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸ ===`);
            console.log('ë³€ê²½ëŸ‰:', change);
            
            const scoreElement = document.getElementById(`${team}-score`);
            const currentScore = parseInt(scoreElement.value) || 0;
            const newScore = Math.max(0, currentScore + change);
            
            console.log('í˜„ì¬ ì ìˆ˜:', currentScore, 'â†’ ìƒˆë¡œìš´ ì ìˆ˜:', newScore);
            
            scoreElement.value = newScore;
            
            // ê¸°ì¡´ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ emitScoreUpdate í•¨ìˆ˜ ì‚¬ìš©
            emitScoreUpdate();
            
            console.log(`${team}íŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${newScore}`);
        }

        // ì ìˆ˜ ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡ í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
        function emitScoreUpdate() {
            const homeScore = document.getElementById('home-score').value || '0';
            const awayScore = document.getElementById('away-score').value || '0';
            
            console.log('=== ì ìˆ˜ ë³€ê²½ ì´ë²¤íŠ¸ ì „ì†¡ ===');
            console.log('í˜„ì¬ ì ìˆ˜:', { homeScore, awayScore });
            console.log('ë³€í™˜ëœ ì ìˆ˜:', { homeScore: parseInt(homeScore), awayScore: parseInt(awayScore) });
            console.log('matchId:', matchId);
            
            // match_updated ì´ë²¤íŠ¸ë¡œ í†µì¼ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
            socket.emit('match_updated', {
                    matchId: matchId,
                home_score: parseInt(homeScore),
                away_score: parseInt(awayScore),
                state: 'ì „ë°˜'
            });
            
            console.log('ì ìˆ˜ ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
        }

        // íŒ€ëª… ì—…ë°ì´íŠ¸
        async function updateTeamName(team) {
            console.log(`=== ${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸ ===`);
            const nameInput = document.getElementById(`${team}-team-name`);
            const newName = nameInput.value;
            
            console.log('ìƒˆë¡œìš´ íŒ€ëª…:', newName);
            
            try {
                // ë¼ìš°í„°ì— ì •ì˜ëœ ì˜¬ë°”ë¥¸ API í˜¸ì¶œ
                const response = await fetch(`/api/matches/${matchId}/team-name`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        team: team,
                        teamName: newName
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log(`${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸ ì„±ê³µ:`, result);
                    
                    // í—¤ë” ë ˆì´ë¸” ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                    console.log(`í—¤ë” ì—…ë°ì´íŠ¸ ì‹œë„: ${team}íŒ€, ìƒˆ ì´ë¦„: ${newName}`);
                    
                    // ê° íŒ€ ì„¹ì…˜ì˜ í—¤ë”ë¥¼ ì§ì ‘ ì„ íƒ
                    let headerElement = null;
                    if (team === 'home') {
                        // í™ˆíŒ€ í—¤ë” ì„ íƒ (ì²« ë²ˆì§¸ .card-header h5)
                        headerElement = document.querySelector('.card-header.bg-primary h5');
                    } else if (team === 'away') {
                        // ì–´ì›¨ì´íŒ€ í—¤ë” ì„ íƒ (ë‘ ë²ˆì§¸ .card-header h5)
                        headerElement = document.querySelector('.card-header.bg-info h5');
                    }
                    
                    if (headerElement) {
                        if (team === 'home') {
                            headerElement.innerHTML = `<i class="bi bi-house"></i> ${newName}`;
                        } else if (team === 'away') {
                            headerElement.innerHTML = `<i class="bi bi-airplane"></i> ${newName}`;
                        }
                        console.log(`${team}íŒ€ í—¤ë” ë ˆì´ë¸” ì—…ë°ì´íŠ¸ ì„±ê³µ: ${newName}`);
                    } else {
                        console.error(`${team}íŒ€ í—¤ë” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
                    }
                    
                    // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                    const button = document.querySelector(`[data-team="${team}"].save-team-name`);
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="bi bi-check-lg"></i> ì €ì¥ë¨';
                    button.classList.add('btn-success');
                    button.classList.remove('btn-outline-success');
                    
                    // 2ì´ˆ í›„ ì›ë˜ ìƒíƒœë¡œ ë³µì›
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.classList.remove('btn-success');
                        button.classList.add('btn-outline-success');
                    }, 2000);
                    
                    // WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
                    if (socket.connected) {
                        socket.emit('dataChanged', {
                            matchId: matchId,
                            type: 'teamName',
                            teamType: team
                        });
                        console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ (íŒ€ëª…)');
                    } else {
                        console.error('âŒ ì†Œì¼“ ì—°ê²°ë˜ì§€ ì•ŠìŒ - dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì‹¤íŒ¨');
                    }
                } else {
                    console.error(`${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:`, response.status);
                    alert('íŒ€ëª… ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error(`${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:`, error);
                alert('íŒ€ëª… ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
            
            console.log(`${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${newName}`);
        }

        // ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼)
        async function updateMatchInfo() {
            try {
                console.log('=== ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ ì‹œì‘ ===');
                
                const homeTeam = document.getElementById('home-team-name').value;
                const awayTeam = document.getElementById('away-team-name').value;
                const homeScore = document.getElementById('home-score').value;
                const awayScore = document.getElementById('away-score').value;
                
                console.log('ì—…ë°ì´íŠ¸í•  ë°ì´í„°:', {
                    homeTeam, awayTeam, homeScore, awayScore
                });
                
                const response = await fetch(`/api/matches/${matchId}`, {
                    method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                        home_team: homeTeam,
                        away_team: awayTeam,
                        home_score: parseInt(homeScore),
                        away_score: parseInt(awayScore)
                        })
                    });
                    
                if (response.ok) {
                    console.log('ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                    } else {
                    console.error('ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', response.status);
                }
            } catch (error) {
                console.error('ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜:', error);
            }
        }

        // íŒ€ ì»¬ëŸ¬ ì €ì¥
        async function saveTeamColor(team) {
            console.log(`=== ${team}íŒ€ ì»¬ëŸ¬ ì €ì¥ ===`);
            const colorInput = document.getElementById(`${team}-team-color`);
            const headerInput = document.getElementById(`${team}-team-header`);
            const color = colorInput.value;
            const headerText = headerInput ? headerInput.value : '';
            
            console.log('ìƒˆë¡œìš´ íŒ€ ì»¬ëŸ¬:', color);
            console.log('íŒ€ íƒ€ì…:', team);
            console.log('ë§¤ì¹˜ ID:', matchId);
            
            try {
                // 1. API í˜¸ì¶œë¡œ DB ì—…ë°ì´íŠ¸
                const response = await fetch(`/api/matches/${matchId}/team-color`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        team: team,
                        teamColor: color,
                        headerText: headerText
                    })
                });
                
                if (response.ok) {
                    console.log(`${team}íŒ€ ì»¬ëŸ¬ API ì—…ë°ì´íŠ¸ ì„±ê³µ: ${color}`);
                } else {
                    console.error(`${team}íŒ€ ì»¬ëŸ¬ API ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${response.status}`);
                }
            } catch (error) {
                console.error(`${team}íŒ€ ì»¬ëŸ¬ API ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:`, error);
            }
            
            // 2. WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
            if (socket.connected) {
                socket.emit('dataChanged', {
                    matchId: matchId,
                    type: 'teamColor',
                    teamType: team
                });
                console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
            } else {
                console.error('âŒ ì†Œì¼“ ì—°ê²°ë˜ì§€ ì•ŠìŒ - dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì‹¤íŒ¨');
            }
            
            console.log(`${team}íŒ€ ì»¬ëŸ¬ ì €ì¥ ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ: ${color}`);
        }
        
        // íŒ€ë¡œê³  ì—…ë¡œë“œ ì²˜ë¦¬
        function handleLogoUpload(team) {
            const fileInput = document.getElementById(`${team}-team-logo`);
            const file = fileInput.files[0];
            
            if (file) {
                // íŒŒì¼ëª… ê²€ì¦ (ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ê²½ê³ )
                const fileName = file.name;
                const invalidChars = /[<>:"/\\|?*]/;
                const controlChars = /[\x00-\x1f\x80-\x9f]/;
                
                if (invalidChars.test(fileName) || controlChars.test(fileName)) {
                    const confirmUpload = confirm(`âš ï¸ íŒŒì¼ëª… ê²½ê³ \n\níŒŒì¼ëª…ì— ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ë¬¸ì: < > : " / \\ | ? *\në˜ëŠ” ì œì–´ ë¬¸ì\n\ní˜„ì¬ íŒŒì¼ëª…: ${fileName}\n\nê·¸ë˜ë„ ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)`);
                    
                    if (!confirmUpload) {
                        fileInput.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                        return;
                    }
                }
                
                // íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB ì œí•œ)
                const maxSize = 5 * 1024 * 1024; // 5MB
                if (file.size > maxSize) {
                    alert(`âŒ íŒŒì¼ í¬ê¸° ì´ˆê³¼\n\níŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.\n\ní˜„ì¬ íŒŒì¼ í¬ê¸°: ${(file.size / 1024 / 1024).toFixed(2)}MB\n\në” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`);
                    fileInput.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const logoPreview = document.getElementById(`${team}-team-logo-preview`);
                    if (logoPreview) {
                        logoPreview.innerHTML = `<img src="${e.target.result}" alt="${team}íŒ€ ë¡œê³ " class="img-fluid">`;
                        console.log(`${team}íŒ€ ë¡œê³  ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸`);
                    }
                };
                reader.readAsDataURL(file);
            }
        }
        
        // íŒ€ë¡œê³  ë°°ê²½ìƒ‰ ë³€ê²½ ì²˜ë¦¬
        function handleLogoBgChange(team) {
            const bgColor = document.getElementById(`${team}-team-logo-bg`).value;
            const logoPreview = document.getElementById(`${team}-team-logo-preview`);
            
            if (logoPreview) {
                logoPreview.style.backgroundColor = bgColor;
                console.log(`${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ ë³€ê²½: ${bgColor}`);
            }
        }
        
        // íŒ€ë¡œê³  ë°°ê²½ìƒ‰ ì €ì¥
        async function saveTeamLogoBg(team) {
            const bgColor = document.getElementById(`${team}-team-logo-bg`).value;
            
            try {
                const response = await fetch(`/api/matches/${matchId}/team-logo-bg`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        team: team,
                        logoBgColor: bgColor
                    })
                });
                
                if (response.ok) {
                    console.log(`${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ ì €ì¥ ì„±ê³µ: ${bgColor}`);
                    
                    // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                    const logoPreview = document.getElementById(`${team}-team-logo-preview`);
                    if (logoPreview) {
                        logoPreview.style.backgroundColor = bgColor;
                    }
                    
                    // WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
                    if (socket.connected) {
                        socket.emit('dataChanged', {
                            matchId: matchId,
                            type: 'teamLogo',
                            teamType: team
                        });
                        console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                    } else {
                        console.error('âŒ ì†Œì¼“ ì—°ê²°ë˜ì§€ ì•ŠìŒ - dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì‹¤íŒ¨');
                    }
                    
                    console.log(`${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                } else {
                    console.error(`${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ ì €ì¥ ì‹¤íŒ¨: ${response.status}`);
                }
            } catch (error) {
                console.error(`${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ ì €ì¥ ì˜¤ë¥˜:`, error);
            }
        }
        
        // ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ì—ì„œ í˜„ì¬ ë¡œê³  ì •ë³´ ì¶”ì¶œ
        function getCurrentPreviewLogoInfo(team) {
            const logoPreview = document.getElementById(`${team}-team-logo-preview`);
            const currentLogoImg = logoPreview.querySelector('img');
            
            return {
                logoPath: currentLogoImg ? currentLogoImg.src : null,
                bgColor: logoPreview.style.backgroundColor || '#ffffff',
                hasLogo: currentLogoImg !== null
            };
        }

        // í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ í•¨ìˆ˜
        async function saveCurrentPreviewLogo(team) {
            const logoInfo = getCurrentPreviewLogoInfo(team);
            
            if (!logoInfo.hasLogo) {
                alert('ì €ì¥í•  ë¡œê³ ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë¡œê³ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            console.log(`${team}íŒ€ í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ ì‹œì‘:`, logoInfo);
            
            try {
                // DBì— íŒ€ë¡œê³  ì •ë³´ ì €ì¥ (íŒŒì¼ ì—…ë¡œë“œ ì—†ì´)
                const response = await fetch(`/api/matches/${matchId}/team-logos`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        homeLogoPath: team === 'home' ? logoInfo.logoPath : null,
                        awayLogoPath: team === 'away' ? logoInfo.logoPath : null,
                        homeTeamName: team === 'home' ? '<%= match.home_team %>' : null,
                        awayTeamName: team === 'away' ? '<%= match.away_team %>' : null,
                        homeTeamColor: team === 'home' ? document.getElementById('home-team-color').value : null,
                        awayTeamColor: team === 'away' ? document.getElementById('away-team-color').value : null,
                        homeTeamColorBg: team === 'home' ? logoInfo.bgColor : null,
                        awayTeamColorBg: team === 'away' ? logoInfo.bgColor : null
                    })
                });
                
                if (response.ok) {
                    console.log(`${team}íŒ€ í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ ì„±ê³µ`);
                    
                    // WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
                    if (socket.connected) {
                        socket.emit('dataChanged', {
                            matchId: matchId,
                            type: 'teamLogo',
                            teamType: team
                        });
                        console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                    }
                } else {
                    console.error(`${team}íŒ€ í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ ì‹¤íŒ¨: ${response.status}`);
                }
            } catch (error) {
                console.error(`${team}íŒ€ í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ ì˜¤ë¥˜:`, error);
            }
        }

        // íŒ€ë¡œê³  ì €ì¥
        async function saveTeamLogo(team) {
            const fileInput = document.getElementById(`${team}-team-logo`);
            const file = fileInput.files[0];
            
            if (file) {
                // íŒŒì¼ì´ ì„ íƒëœ ê²½ìš°: ê¸°ì¡´ íŒŒì¼ ì—…ë¡œë“œ ë¡œì§
                console.log(`${team}íŒ€ ìƒˆ íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œ`);
                await uploadNewLogoFile(team, file);
            } else {
                // íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°: ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ì˜ í˜„ì¬ ë¡œê³  í™œìš©
                console.log(`${team}íŒ€ í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë¡œê³  ì €ì¥ ëª¨ë“œ`);
                await saveCurrentPreviewLogo(team);
            }
        }

        // ìƒˆ íŒŒì¼ ì—…ë¡œë“œ í•¨ìˆ˜ (ê¸°ì¡´ ë¡œì§ ë¶„ë¦¬)
        async function uploadNewLogoFile(team, file) {
            const bgColor = document.getElementById(`${team}-team-logo-bg`).value;
            
            const formData = new FormData();
            formData.append('logo', file);
            formData.append('matchId', matchId);
            formData.append('teamType', team);
            formData.append('teamName', team === 'home' ? '<%= match.home_team %>' : '<%= match.away_team %>');
            formData.append('bgColor', bgColor);
            formData.append('sportType', '<%= match.sport_type %>'); // ì¢…ëª© íƒ€ì… ì¶”ê°€
            
            try {
                const response = await fetch(`/api/overlay-images/TEAMLOGO/<%= match.sport_type %>`, {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    let result;
                    try {
                        const responseText = await response.text();
                        console.log(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ ì‘ë‹µ í…ìŠ¤íŠ¸:`, responseText);
                        result = JSON.parse(responseText);
                        console.log(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ ì„±ê³µ:`, result);
                    } catch (jsonError) {
                        console.error(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ JSON íŒŒì‹± ì˜¤ë¥˜:`, jsonError);
                        console.error('ì‘ë‹µ í…ìŠ¤íŠ¸:', await response.text());
                        alert(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ ì‘ë‹µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`);
                        return;
                    }
                    
                    // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ - ë‹¨ìˆœí•œ ë°©ì‹
                    const logoPreview = document.getElementById(`${team}-team-logo-preview`);
                    if (logoPreview) {
                        const currentBgColor = document.getElementById(`${team}-team-logo-bg`).value;
                        logoPreview.innerHTML = `<img src="${result.logoPath}" alt="${team}íŒ€ ë¡œê³ " class="img-fluid">`;
                        logoPreview.style.backgroundColor = currentBgColor;
                    }
                    
                    // íŒŒì¼ ì…ë ¥ ì´ˆê¸°í™” (ì£¼ì„ ì²˜ë¦¬ - fileInput ë³€ìˆ˜ ìŠ¤ì½”í”„ ë¬¸ì œ í•´ê²°)
                    // fileInput.value = '';
                    const fileInput = document.getElementById(`${team}-team-logo`);
                    if (fileInput) fileInput.value = '';
                    
                    // TeamInfo í…Œì´ë¸” ì €ì¥ì€ /api/overlay-images/TEAMLOGO/:sportTypeì—ì„œ ì´ë¯¸ ì²˜ë¦¬ë¨
                    console.log(`${team}íŒ€ TeamInfo í…Œì´ë¸” ì €ì¥ ì™„ë£Œ (íŒŒì¼ ì—…ë¡œë“œ APIì—ì„œ ì²˜ë¦¬)`);
                    
                    // WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
                    if (socket.connected) {
                        socket.emit('dataChanged', {
                            matchId: matchId,
                            type: 'teamLogo',
                            teamType: team
                        });
                        console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                    } else {
                        console.error('âŒ ì†Œì¼“ ì—°ê²°ë˜ì§€ ì•ŠìŒ - dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì‹¤íŒ¨');
                    }
                    
                    console.log(`${team}íŒ€ ë¡œê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                } else {
                    console.error(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ ì‹¤íŒ¨: ${response.status}`);
                }
            } catch (error) {
                console.error(`${team}íŒ€ ë¡œê³  ì—…ë¡œë“œ ì˜¤ë¥˜:`, error);
            }
        }

        // íŒ€ë¡œê³  ì‚­ì œ í•¨ìˆ˜
        async function removeTeamLogo(teamType) {
            try {
                const matchId = '<%= match.id %>';
                
                // 1. í˜„ì¬ ë°°ê²½ìƒ‰ ê°€ì ¸ì˜¤ê¸°
                const logoPreview = document.getElementById(`${teamType}-team-logo-preview`);
                const currentBgColor = logoPreview.style.backgroundColor || '#ffffff';
                
                // 2. APIë¡œ ì´ë¯¸ì§€ë§Œ nullë¡œ ì„¤ì • (ë°°ê²½ìƒ‰ ìœ ì§€)
                const response = await fetch(`/api/overlay-images/TEAMLOGO/SOCCER/`, {
                    method: 'POST',
                    body: new FormData() // ë¹ˆ FormDataë¡œ ì´ë¯¸ì§€ ì—†ìŒì„ ì „ë‹¬
                });
                
                if (response.ok) {
                    // 3. UI ì—…ë°ì´íŠ¸ (ì´ë¯¸ì§€ë§Œ ì œê±°, ë°°ê²½ìƒ‰ ìœ ì§€)
                    logoPreview.innerHTML = '<div class="no-logo">ë¡œê³  ì—†ìŒ</div>';
                    logoPreview.style.backgroundColor = currentBgColor; // ë°°ê²½ìƒ‰ ìœ ì§€
                    
                    // 4. WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                    socket.emit('teamLogoUpdated', {
                        matchId: matchId,
                        teamType: teamType,
                        logoPath: null,
                        bgColor: currentBgColor
                    });
                    
                    console.log(`${teamType}íŒ€ ë¡œê³  ì‚­ì œ ì™„ë£Œ`);
                } else {
                    console.error('íŒ€ë¡œê³  ì‚­ì œ ì‹¤íŒ¨:', response.status);
                }
            } catch (error) {
                console.error('íŒ€ë¡œê³  ì‚­ì œ ì˜¤ë¥˜:', error);
            }
        }

        // íŒ€ë¡œê³  ì‚¬ìš©ìœ ë¬´ í† ê¸€ í•¨ìˆ˜
        async function toggleTeamLogos() {
            try {
                const toggleButton = document.getElementById('toggle-team-logos');
                const isCurrentlyVisible = toggleButton.classList.contains('btn-success');
                const newState = !isCurrentlyVisible;
                
                console.log(`=== íŒ€ë¡œê³  í† ê¸€: ${newState ? 'í‘œì‹œ' : 'ìˆ¨ê¹€'} ===`);
                
                const response = await fetch(`/api/soccer-team-logo-visibility/${matchId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        useLogos: newState
                    })
                });
                
                if (response.ok) {
                    console.log(`íŒ€ë¡œê³  í† ê¸€ ì„±ê³µ: ${newState ? 'í‘œì‹œ' : 'ìˆ¨ê¹€'}`);
                    
                    // WebSocket ì´ë²¤íŠ¸ë¡œ ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼
                    socket.emit('teamLogoVisibilityChanged', {
                        matchId: matchId,
                        useLogos: newState
                    });
                    
                    // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                    const logoDisplayButton = document.getElementById('toggle-logo-display');
                    
                    if (newState) {
                        toggleButton.classList.add('btn-success');
                        toggleButton.classList.remove('btn-outline-secondary');
                        toggleButton.innerHTML = '<i class="bi bi-eye"></i> í‘œì‹œ';
                        
                        // íŒ€ë¡œê³ ê°€ í‘œì‹œë  ë•Œë§Œ ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ í™œì„±í™”
                        logoDisplayButton.style.display = 'inline-block';
                        logoDisplayButton.classList.remove('btn-warning');
                        logoDisplayButton.classList.add('btn-outline-secondary');
                        logoDisplayButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
                    } else {
                        toggleButton.classList.remove('btn-success');
                        toggleButton.classList.add('btn-outline-secondary');
                        toggleButton.innerHTML = '<i class="bi bi-eye-slash"></i> ìˆ¨ê¹€';
                        
                        // íŒ€ë¡œê³ ê°€ ìˆ¨ê²¨ì§ˆ ë•ŒëŠ” ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ ë¹„í™œì„±í™”
                        logoDisplayButton.style.display = 'none';
                    }
                    
                    console.log(`íŒ€ë¡œê³ ê°€ ${newState ? 'í‘œì‹œ' : 'ìˆ¨ê²¨ì§‘ë‹ˆë‹¤'}.`);
                } else {
                    console.error('íŒ€ë¡œê³  í† ê¸€ ì‹¤íŒ¨:', response.status);
                }
            } catch (error) {
                console.error('íŒ€ë¡œê³  í† ê¸€ ì˜¤ë¥˜:', error);
            }
        }
        
        // íŒ€ë¡œê³  ë°°ê²½ìƒ‰ë§Œ í‘œì‹œ í† ê¸€ í•¨ìˆ˜
        async function toggleLogoDisplay() {
            try {
                const toggleButton = document.getElementById('toggle-logo-display');
                const isCurrentlyBackgroundOnly = toggleButton.classList.contains('btn-warning');
                const newState = !isCurrentlyBackgroundOnly;
                
                console.log(`=== íŒ€ë¡œê³  ë°°ê²½ìƒ‰ í† ê¸€: ${newState ? 'ë°°ê²½ìƒ‰ë§Œ' : 'ë¡œê³  í‘œì‹œ'} ===`);
                
                // ì„œë²„ì— í‘œì‹œ ëª¨ë“œ ì €ì¥
                const displayMode = newState ? 'background' : 'logo';
                const saveResponse = await fetch(`/api/matches/${matchId}/team-logo-display-mode`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ displayMode: displayMode })
                });
                
                if (saveResponse.ok) {
                    console.log(`íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ì €ì¥ ì„±ê³µ: ${displayMode}`);
                } else {
                    console.error('íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ì €ì¥ ì‹¤íŒ¨:', saveResponse.status);
                }
                
                // WebSocket ì´ë²¤íŠ¸ë¡œ ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼
                console.log('=== íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ë³€ê²½ ì´ë²¤íŠ¸ ì „ì†¡ ===');
                console.log('displayMode:', displayMode);
                console.log('ì†Œì¼“ ì—°ê²° ìƒíƒœ:', socket.connected);
                
                if (socket.connected) {
                    socket.emit('teamLogoDisplayModeChanged', {
                        matchId: matchId,
                        displayMode: displayMode
                    });
                    console.log('âœ… teamLogoDisplayModeChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                } else {
                    console.error('âŒ ì†Œì¼“ ì—°ê²°ë˜ì§€ ì•ŠìŒ - teamLogoDisplayModeChanged ì´ë²¤íŠ¸ ì „ì†¡ ì‹¤íŒ¨');
                }
                
                // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                if (newState) {
                    toggleButton.classList.add('btn-warning');
                    toggleButton.classList.remove('btn-outline-secondary');
                    toggleButton.innerHTML = '<i class="bi bi-palette"></i> ë°°ê²½ë§Œ';
                } else {
                    toggleButton.classList.remove('btn-warning');
                    toggleButton.classList.add('btn-outline-secondary');
                    toggleButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
                }
                
                console.log(`íŒ€ë¡œê³  ë°°ê²½ìƒ‰ í† ê¸€ ì„±ê³µ: ${newState ? 'ë°°ê²½ìƒ‰ë§Œ' : 'ë¡œê³  í‘œì‹œ'}`);
            } catch (error) {
                console.error('íŒ€ë¡œê³  ë°°ê²½ìƒ‰ í† ê¸€ ì˜¤ë¥˜:', error);
            }
        }
        
        async function loadTeamLogoVisibility() {
            try {
                const response = await fetch(`/api/soccer-team-logo-visibility/${matchId}`, {
                    method: 'GET',
                    headers: {
                        'Cache-Control': 'no-cache',
                        'Pragma': 'no-cache'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    // API ì‘ë‹µ êµ¬ì¡°: { success: true, useLogos: false }
                    const useLogos = data.useLogos;
                    
                    // í† ê¸€ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                    const toggleButton = document.getElementById('toggle-team-logos');
                    const logoDisplayButton = document.getElementById('toggle-logo-display');
                    
                    if (useLogos) {
                        toggleButton.classList.add('btn-success');
                        toggleButton.classList.remove('btn-outline-secondary');
                        toggleButton.innerHTML = '<i class="bi bi-eye"></i> í‘œì‹œ';
                        
                        // íŒ€ë¡œê³ ê°€ í‘œì‹œë  ë•Œë§Œ ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ í™œì„±í™”
                        logoDisplayButton.style.display = 'inline-block';
                        
                        // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¡œê³  í‘œì‹œ ëª¨ë“œ ì„¤ì •
                        logoDisplayButton.classList.remove('btn-warning');
                        logoDisplayButton.classList.add('btn-outline-secondary');
                        logoDisplayButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
                    } else {
                        toggleButton.classList.remove('btn-success');
                        toggleButton.classList.add('btn-outline-secondary');
                        toggleButton.innerHTML = '<i class="bi bi-eye-slash"></i> ìˆ¨ê¹€';
                        
                        // íŒ€ë¡œê³ ê°€ ìˆ¨ê²¨ì§ˆ ë•ŒëŠ” ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ ë¹„í™œì„±í™”
                        logoDisplayButton.style.display = 'none';
                    }
                } else {
                    console.log('íŒ€ë¡œê³  ì‚¬ìš© ìƒíƒœ ë¡œë“œ ì‹¤íŒ¨, ê¸°ë³¸ê°’(true) ì‚¬ìš©');
                    // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¡œê³  í‘œì‹œ í™œì„±í™”
                    const toggleButton = document.getElementById('toggle-team-logos');
                    const logoDisplayButton = document.getElementById('toggle-logo-display');
                    
                    if (toggleButton) {
                        toggleButton.classList.add('btn-success');
                        toggleButton.classList.remove('btn-outline-secondary');
                        toggleButton.innerHTML = '<i class="bi bi-eye"></i> í‘œì‹œ';
                    }
                    
                    // íŒ€ë¡œê³ ê°€ í‘œì‹œë  ë•Œë§Œ ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ í™œì„±í™”
                    if (logoDisplayButton) {
                        logoDisplayButton.style.display = 'inline-block';
                        logoDisplayButton.classList.remove('btn-warning');
                        logoDisplayButton.classList.add('btn-outline-secondary');
                        logoDisplayButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
                    }
                }
            } catch (error) {
                console.error('íŒ€ë¡œê³  ì‚¬ìš© ìƒíƒœ ë¡œë“œ ì˜¤ë¥˜:', error);
                // ê¸°ë³¸ê°’ìœ¼ë¡œ ë¡œê³  í‘œì‹œ í™œì„±í™”
                const toggleButton = document.getElementById('toggle-team-logos');
                const logoDisplayButton = document.getElementById('toggle-logo-display');
                
                toggleButton.classList.add('btn-success');
                toggleButton.classList.remove('btn-outline-secondary');
                toggleButton.innerHTML = '<i class="bi bi-eye"></i> í‘œì‹œ';
                
                // íŒ€ë¡œê³ ê°€ í‘œì‹œë  ë•Œë§Œ ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ í™œì„±í™”
                logoDisplayButton.style.display = 'inline-block';
                logoDisplayButton.classList.remove('btn-warning');
                logoDisplayButton.classList.add('btn-outline-secondary');
                logoDisplayButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
            }
        }
        
        // íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ìƒíƒœ ë¡œë“œ
        async function loadTeamLogoDisplayMode() {
            try {
                const response = await fetch(`/api/matches/${matchId}/team-logo-display-mode`);
                
                if (response.ok) {
                    const data = await response.json();
                    const displayMode = data.displayMode;
                    
                    // ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                    const logoDisplayButton = document.getElementById('toggle-logo-display');
                    
                    if (logoDisplayButton) {
                        if (displayMode === 'background') {
                            logoDisplayButton.classList.add('btn-warning');
                            logoDisplayButton.classList.remove('btn-outline-secondary');
                            logoDisplayButton.innerHTML = '<i class="bi bi-palette"></i> ë°°ê²½ë§Œ';
                        } else {
                            logoDisplayButton.classList.remove('btn-warning');
                            logoDisplayButton.classList.add('btn-outline-secondary');
                            logoDisplayButton.innerHTML = '<i class="bi bi-image"></i> ë¡œê³ ';
                        }
                    }
                }
            } catch (error) {
                console.error('íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // URL ë³µì‚¬ í•¨ìˆ˜ë“¤ (ì»´íŒ©íŠ¸ ë²„ì „)
        function copyMobileUrl() {
            const input = document.getElementById('mobile-url');
            input.select();
            document.execCommand('copy');
            
            // ê°„ë‹¨í•œ í† ìŠ¤íŠ¸ ì•Œë¦¼
            const button = event.target.closest('button');
            const originalHTML = button.innerHTML;
            button.innerHTML = '<i class="bi bi-check"></i>';
            button.classList.add('btn-success');
            button.classList.remove('btn-outline-secondary');
            
            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.classList.remove('btn-success');
                button.classList.add('btn-outline-secondary');
            }, 1500);
        }

        function copyOverlayUrl() {
            const input = document.getElementById('overlay-url');
            input.select();
            document.execCommand('copy');
            
            // ê°„ë‹¨í•œ í† ìŠ¤íŠ¸ ì•Œë¦¼
            const button = event.target.closest('button');
            const originalHTML = button.innerHTML;
            button.innerHTML = '<i class="bi bi-check"></i>';
            button.classList.add('btn-success');
            button.classList.remove('btn-outline-secondary');
            
            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.classList.remove('btn-success');
                button.classList.add('btn-outline-secondary');
            }, 1500);
        }

        // íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ í•¨ìˆ˜ (ì˜¤ë²„ë ˆì´ì™€ ë™ì¼í•œ ë¡œì§)
        async function loadTeamLogoInfo() {
            try {
                console.log('íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ ì‹œì‘...');
                
                // 1. DBì—ì„œ íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ (ìµœìš°ì„ ìˆœìœ„) - ì˜¤ë²„ë ˆì´ì™€ ë™ì¼í•œ ë°©ì‹
                try {
                    const response = await fetch(`/api/matches/${matchId}/team-logos`);
                    
                    if (response.ok) {
                        const result = await response.json();
                        console.log('íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ ì„±ê³µ:', result.teamLogos);
                        
                        if (result.teamLogos && result.teamLogos.length > 0) {
                            // ê° íŒ€ì˜ ë¡œê³  ì •ë³´ ì—…ë°ì´íŠ¸ (ì˜¤ë²„ë ˆì´ì™€ ë™ì¼í•œ ë°©ì‹)
                            result.teamLogos.forEach(teamInfo => {
                                const teamType = teamInfo.team_type;
                                console.log(`${teamType}íŒ€ ë¡œê³  ì •ë³´ ì—…ë°ì´íŠ¸:`, teamInfo);
                                
                                // ë¡œê³  ë°°ê²½ìƒ‰ ì—…ë°ì´íŠ¸ (ì˜¤ë²„ë ˆì´ì™€ ë™ì¼í•œ ë°©ì‹)
                                const logoBgInput = document.getElementById(`${teamType}-team-logo-bg`);
                                if (logoBgInput && teamInfo.logo_bg_color) {
                                    logoBgInput.value = teamInfo.logo_bg_color;
                                }
                                
                                // ë¡œê³  ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸ (ë‹¨ìˆœí•œ ë°©ì‹)
                                const logoPreview = document.getElementById(`${teamType}-team-logo-preview`);
                                if (logoPreview) {
                                    if (teamInfo.logo_path) {
                                        logoPreview.innerHTML = `<img src="${teamInfo.logo_path}" alt="${teamType}íŒ€ ë¡œê³ " class="img-fluid">`;
                                    } else {
                                        logoPreview.innerHTML = '<div class="no-logo">ë¡œê³  ì—†ìŒ</div>';
                                    }
                                    logoPreview.style.backgroundColor = teamInfo.logo_bg_color || '#ffffff';
                                }
                            });
                            return; // ì„±ê³µì ìœ¼ë¡œ ë¡œë“œí–ˆìœ¼ë©´ ì¢…ë£Œ
                        }
                    }
                } catch (dbError) {
                    console.error('íŒ€ë¡œê³  DB ì¡°íšŒ ì˜¤ë¥˜:', dbError);
                }
                
                // 2. íŒ€ ë¡œê³  ë§µ ì •ë³´ ë¡œë“œ (ë°±ì—…) - ì˜¤ë²„ë ˆì´ì™€ ë™ì¼í•œ ë°©ì‹
                try {
                    const response = await fetch('/api/overlay-images/TEAMLOGO/SOCCER/');
                    if (response.ok) {
                        const data = await response.json();
                        if (data && data.teamLogoMap) {
                            const homeTeamName = '<%= match.home_team %>';
                            const awayTeamName = '<%= match.away_team %>';
                            
                            console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íŒ€ë“¤:', Object.keys(data.teamLogoMap));
                            console.log('í˜„ì¬ ê²½ê¸° íŒ€ëª…:', { homeTeamName, awayTeamName });
                            
                            // í™ˆíŒ€ ë¡œê³  ì„¤ì • (ë‹¨ìˆœí•œ ë°©ì‹)
                            if (data.teamLogoMap[homeTeamName]) {
                                const logoPreview = document.getElementById('home-team-logo-preview');
                                if (logoPreview) {
                                    logoPreview.innerHTML = `<img src="${data.teamLogoMap[homeTeamName].path}" alt="í™ˆíŒ€ ë¡œê³ " class="img-fluid">`;
                                    logoPreview.style.backgroundColor = data.teamLogoMap[homeTeamName].bgColor || '#ffffff';
                                    console.log('í™ˆíŒ€ ë¡œê³  ì •ë³´ ë¡œë“œ (íŒ€ ë§µ):', data.teamLogoMap[homeTeamName]);
                                }
                            }
                            
                            // ì–´ì›¨ì´íŒ€ ë¡œê³  ì„¤ì • (ë‹¨ìˆœí•œ ë°©ì‹)
                            if (data.teamLogoMap[awayTeamName]) {
                                const logoPreview = document.getElementById('away-team-logo-preview');
                                if (logoPreview) {
                                    logoPreview.innerHTML = `<img src="${data.teamLogoMap[awayTeamName].path}" alt="ì–´ì›¨ì´íŒ€ ë¡œê³ " class="img-fluid">`;
                                    logoPreview.style.backgroundColor = data.teamLogoMap[awayTeamName].bgColor || '#ffffff';
                                    console.log('ì–´ì›¨ì´íŒ€ ë¡œê³  ì •ë³´ ë¡œë“œ (íŒ€ ë§µ):', data.teamLogoMap[awayTeamName]);
                                }
                            }
                        }
                    }
                } catch (mapError) {
                    console.error('íŒ€ ë¡œê³  ë§µ ì¡°íšŒ ì˜¤ë¥˜:', mapError);
                }
                
            } catch (error) {
                console.error('íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ URL ì„¤ì •
        document.addEventListener('DOMContentLoaded', async function() {
            const baseUrl = window.location.origin;
            document.getElementById('mobile-url').value = `${baseUrl}/soccer/${matchId}/control-mobile`;
            document.getElementById('overlay-url').value = `${baseUrl}/soccer/${matchId}/overlay`;
            
            // íŒ€ë¡œê³  ì •ë³´ ë¡œë“œ (DBì—ì„œ)
            await loadTeamLogoInfo();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­
            console.log('=== í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ===');
            socket.emit('request_timer_state', { matchId: matchId });
            
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› (ë°±ì—… í´ë”ì˜ ì˜ˆì „ ë°©ì‹ - ì„œë²„íƒ€ì´ë¨¸ì™€ ì™„ì „ ë…ë¦½)
        console.log('=== í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› (ë…ë¦½ ëª¨ë“œ) ===');
        
        // ë¡œì»¬ íƒ€ì´ë¨¸ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ì„œë²„ ìƒíƒœ ìš”ì²­ ì œê±°
        // localStorageì—ì„œ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì›
        const savedTimerState = localStorage.getItem(`timer_state_${matchId}`);
        if (savedTimerState) {
            try {
                const parsedState = JSON.parse(savedTimerState);
                const currentTime = Date.now();
                const timeDiff = currentTime - parsedState.lastSaveTime;
                
                // íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ ì¤‘ì´ì—ˆë‹¤ë©´ ê²½ê³¼ ì‹œê°„ ê³„ì‚°
                if (parsedState.isRunning && parsedState.startTime) {
                    const elapsedSeconds = Math.floor(timeDiff / 1000);
                    timerState.currentSeconds = parsedState.currentSeconds + elapsedSeconds;
                    timerState.isRunning = true;
                    timerState.startTime = parsedState.startTime; // ì›ë˜ startTime ìœ ì§€
                    timerState.pausedTime = parsedState.pausedTime;
                    
                    console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› (ë…ë¦½ ëª¨ë“œ):', {
                        currentSeconds: timerState.currentSeconds,
                        isRunning: timerState.isRunning,
                        elapsedSeconds: elapsedSeconds,
                        originalStartTime: parsedState.startTime,
                        currentStartTime: timerState.startTime
                    });
                    
                    // ë¡œì»¬ íƒ€ì´ë¨¸ ì‹œì‘
                    startLocalTimer();
                } else {
                    timerState.currentSeconds = parsedState.currentSeconds;
                    timerState.isRunning = false;
                    timerState.startTime = Date.now();
                    timerState.pausedTime = parsedState.pausedTime;
                    
                    console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ì •ì§€ ìƒíƒœ ë³µì› (ë…ë¦½ ëª¨ë“œ):', {
                        currentSeconds: timerState.currentSeconds,
                        isRunning: timerState.isRunning
                    });
                }
                
                updateTimerDisplay();
            } catch (error) {
                console.error('ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› ì‹¤íŒ¨:', error);
            }
        }
        
        // ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ (ë¡œì»¬ íƒ€ì´ë¨¸ ëª¨ë“œì¼ ë•Œ)
        console.log('=== í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ===');
        socket.emit('request_local_timer_state', { matchId: matchId });
        
        // íƒ€ì´ë¨¸ ëª¨ë“œ ìƒíƒœ ìš”ì²­
        console.log('=== í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ëª¨ë“œ ìƒíƒœ ìš”ì²­ ===');
        socket.emit('request_timer_mode', { matchId: matchId });
            
        // ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ì²˜ë¦¬
        socket.on('request_local_timer_state', function(data) {
            console.log('=== ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ìš”ì²­ ìˆ˜ì‹  ===');
            console.log('ìš”ì²­ ë°ì´í„°:', data);
            
            if (data.matchId === matchId) {
                // í˜„ì¬ ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ì „ì†¡
                socket.emit('local_timer_update', {
                    matchId: matchId,
                    currentSeconds: timerState.currentSeconds,
                    isRunning: timerState.isRunning,
                    startTime: timerState.startTime,
                    pausedTime: timerState.pausedTime
                });
                
                console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ì „ì†¡:', {
                    currentSeconds: timerState.currentSeconds,
                    isRunning: timerState.isRunning,
                    startTime: timerState.startTime,
                    pausedTime: timerState.pausedTime
                });
            }
        });

        // ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› ì´ë²¤íŠ¸
        socket.on('local_timer_state_restored', function(data) {
            console.log('=== ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› ìˆ˜ì‹  ===');
            console.log('ë³µì›ëœ ë°ì´í„°:', data);
            
            if (data.matchId === matchId) {
                // ë³µì›ëœ ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ì ìš©
                timerState.currentSeconds = data.timerState.currentSeconds;
                timerState.isRunning = data.timerState.isRunning;
                timerState.startTime = data.timerState.startTime;
                timerState.pausedTime = data.timerState.pausedTime;
                
                console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ìƒíƒœ ë³µì› ì™„ë£Œ:', {
                    currentSeconds: timerState.currentSeconds,
                    isRunning: timerState.isRunning,
                    startTime: timerState.startTime,
                    pausedTime: timerState.pausedTime
                });
                
                // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
                updateTimerDisplay();
                
                // ì‹¤í–‰ ì¤‘ì´ì—ˆë‹¤ë©´ ë¡œì»¬ íƒ€ì´ë¨¸ ì‹œì‘
                if (timerState.isRunning) {
                    startLocalTimer();
                }
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²½ê¸° ë°ì´í„° ë¡œë“œ
        loadMatchData();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ìŠ¹ë¶€ì°¨ê¸° í…ìŠ¤íŠ¸ ë¡œë“œ
            loadPenaltyText();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ€íšŒëª… ë¡œë“œ
            console.log('=== í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ€íšŒëª… ë¡œë“œ í˜¸ì¶œ ===');
            loadTournamentText();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ë“ì  ì •ë³´ ë¡œë“œ
            loadGoalsFromServer();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ë“ì  ì •ë³´ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
            renderHomeGoalsList();
            renderAwayGoalsList();
            
            // íŒ€ë¡œê³  ì •ë³´ëŠ” ì´ë¯¸ ìœ„ì—ì„œ ë¡œë“œí–ˆìœ¼ë¯€ë¡œ ì¤‘ë³µ í˜¸ì¶œ ì œê±°
            
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íƒ€ì´ë¨¸ ëª¨ë“œ ìƒíƒœëŠ” ì„œë²„ì—ì„œ ë°›ì•„ì˜´ (request_timer_mode ì´ë²¤íŠ¸ë¡œ ì²˜ë¦¬)
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ íŒ€ë¡œê³  ì‚¬ìš© ìƒíƒœ ë¡œë“œ (ë¨¼ì € ì‹¤í–‰)
            await loadTeamLogoVisibility();
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ íŒ€ë¡œê³  í‘œì‹œ ëª¨ë“œ ìƒíƒœ ë¡œë“œ (ë‚˜ì¤‘ì— ì‹¤í–‰)
            await loadTeamLogoDisplayMode();
            
            // ì‹œê°„ ì ìš© ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ìˆ«ì ìë™ ë³€í™˜ í¬í•¨)
            document.getElementById('apply-time-btn').addEventListener('click', function() {
                console.log('=== ì‹œê°„ ì ìš© ë²„íŠ¼ í´ë¦­ ===');
                const timeEditInput = document.getElementById('time-edit-input');
                let timeValue = timeEditInput.value.trim();
                
                console.log('ì…ë ¥ëœ ê°’:', timeValue);
                
                // ë¹ˆ ê°’ ì²´í¬
                if (!timeValue) {
                    alert('ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                let minutes, seconds;
                
                // 00:00 í˜•ì‹ì¸ì§€ í™•ì¸
                const timeRegex = /^([0-9]{2}):([0-9]{2})$/;
                if (timeRegex.test(timeValue)) {
                    // 00:00 í˜•ì‹ì¸ ê²½ìš°
                    [minutes, seconds] = timeValue.split(':').map(Number);
                                    } else {
                    // ìˆ«ìë§Œ ì…ë ¥ëœ ê²½ìš° ìë™ ë³€í™˜
                    const numericValue = parseInt(timeValue);
                    if (isNaN(numericValue) || numericValue < 0) {
                        alert('ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
                    // ìˆ«ìë¥¼ ì‹œê°„ìœ¼ë¡œ ë³€í™˜
                    if (numericValue < 100) {
                        // 1-99: ì´ˆë¡œ ì²˜ë¦¬
                        minutes = 0;
                        seconds = numericValue;
                    } else if (numericValue < 10000) {
                        // 100-9999: ë§ˆì§€ë§‰ ë‘ ìë¦¬ëŠ” ì´ˆ, ë‚˜ë¨¸ì§€ëŠ” ë¶„
                        minutes = Math.floor(numericValue / 100);
                        seconds = numericValue % 100;
                        } else {
                        // 10000 ì´ìƒ: ë§ˆì§€ë§‰ ë‘ ìë¦¬ëŠ” ì´ˆ, ë‚˜ë¨¸ì§€ëŠ” ë¶„
                        minutes = Math.floor(numericValue / 100);
                        seconds = numericValue % 100;
                    }
                    
                    console.log('ë³€í™˜ëœ ì‹œê°„:', `${minutes}:${seconds}`);
                }
                
                // 0 ë˜ëŠ” 0000 ì…ë ¥ ì œí•œ
                if (minutes === 0 && seconds === 0) {
                    alert('0 ë˜ëŠ” 00:00ì€ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìµœì†Œ 00:01 ì´ìƒì˜ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                                return;
                            }
                            
                // ìœ íš¨ì„± ê²€ì‚¬
                if (minutes > 90 || seconds > 59) {
                    alert('ì˜¬ë°”ë¥¸ ì‹œê°„ ë²”ìœ„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ë¶„: 0-90, ì´ˆ: 0-59)');
                    return;
                }
                
                // ì„œë²„ì— ì‹œê°„ ì„¤ì • ìš”ì²­ (ì„œë²„ ì¤‘ì‹¬)
                console.log('ì„œë²„ íƒ€ì´ë¨¸ ì‹œê°„ ì„¤ì •');
                socket.emit('timer_control', {
                    matchId: matchId,
                    action: 'set',
                    timeValue: { minutes: minutes, seconds: seconds }
                });
                
                // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
                updateTimerDisplay();
                
                // ì…ë ¥ í•„ë“œ ìˆ¨ê¸°ê¸°
                document.getElementById('time-edit-container').style.display = 'none';
                
                console.log('ì‹œê°„ ì„¤ì • ì™„ë£Œ:', `${minutes}:${seconds}`);
            });
            
            // íŒ€ëª… ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.save-team-name').forEach(button => {
            button.addEventListener('click', function() {
                    const team = this.getAttribute('data-team');
                    console.log(`=== ${team}íŒ€ëª… ì €ì¥ ë²„íŠ¼ í´ë¦­ ===`);
                    updateTeamName(team);
            });
        });

            // íŒ€ ì»¬ëŸ¬ ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('.save-team-color').forEach(button => {
            button.addEventListener('click', function() {
                    const team = this.getAttribute('data-team');
                    console.log(`=== ${team}íŒ€ ì»¬ëŸ¬ ì €ì¥ ë²„íŠ¼ í´ë¦­ ===`);
                    saveTeamColor(team);
            });
        });
        
        
        // íŒ€ë¡œê³  ê´€ë ¨ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.querySelectorAll('input[type="file"]').forEach(input => {
            input.addEventListener('change', function() {
                const team = this.id.replace('-team-logo', '');
                handleLogoUpload(team);
            });
        });
        
        document.querySelectorAll('input[type="color"]').forEach(input => {
            if (input.id.includes('logo-bg')) {
                input.addEventListener('change', function() {
                    const team = this.id.replace('-team-logo-bg', '');
                    handleLogoBgChange(team);
                });
            }
        });
        
        // í™ˆíŒ€ ë¡œê³  ì—…ë¡œë“œ (ì•¼êµ¬ì™€ ë™ì¼í•œ ë°©ì‹)
        document.getElementById('home-team-logo').addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (file) {
                // íŒŒì¼ëª… ê²€ì¦ (ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ê²½ê³ )
                const fileName = file.name;
                const invalidChars = /[<>:"/\\|?*]/;
                const controlChars = /[\x00-\x1f\x80-\x9f]/;
                
                if (invalidChars.test(fileName) || controlChars.test(fileName)) {
                    const confirmUpload = confirm(`âš ï¸ íŒŒì¼ëª… ê²½ê³ \n\níŒŒì¼ëª…ì— ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ë¬¸ì: < > : " / \\ | ? *\në˜ëŠ” ì œì–´ ë¬¸ì\n\ní˜„ì¬ íŒŒì¼ëª…: ${fileName}\n\nê·¸ë˜ë„ ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)`);
                    
                    if (!confirmUpload) {
                        e.target.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                        return;
                    }
                }
                
                // íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB ì œí•œ)
                const maxSize = 5 * 1024 * 1024; // 5MB
                if (file.size > maxSize) {
                    alert(`âŒ íŒŒì¼ í¬ê¸° ì´ˆê³¼\n\níŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.\n\ní˜„ì¬ íŒŒì¼ í¬ê¸°: ${(file.size / 1024 / 1024).toFixed(2)}MB\n\në” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`);
                    e.target.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                    return;
                }
                
                try {
                    const formData = new FormData();
                    formData.append('logo', file);
                    formData.append('teamType', 'home');
                    formData.append('sportType', 'SOCCER');
                    formData.append('matchId', '<%= match.id %>');
                    formData.append('teamName', '<%= match.home_team %>');
                    formData.append('originalFilename', file.name);
                    
                    const response = await fetch(`/api/overlay-images/TEAMLOGO/<%= match.sport_type %>`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    if (data.success) {
                        // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                        const logoPreview = document.getElementById('home-team-logo-preview');
                        if (logoPreview) {
                            logoPreview.innerHTML = `<img src="${data.logoPath}" alt="í™ˆíŒ€ ë¡œê³ " class="img-fluid">`;
                            logoPreview.style.backgroundColor = document.getElementById('home-team-logo-bg').value || '#ffffff';
                        }
                        
                        showToast('í™ˆíŒ€ ë¡œê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                        
                        // WebSocket ì´ë²¤íŠ¸ëŠ” ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì „ì†¡ë¨ (ì¤‘ë³µ ì œê±°)
                    } else {
                        showToast(data.message || 'ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                    }
                } catch (error) {
                    console.error('í™ˆíŒ€ ë¡œê³  ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
                    showToast('ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
                }
            }
        });

        // ì›ì •íŒ€ ë¡œê³  ì—…ë¡œë“œ (ì•¼êµ¬ì™€ ë™ì¼í•œ ë°©ì‹)
        document.getElementById('away-team-logo').addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (file) {
                // íŒŒì¼ëª… ê²€ì¦ (ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ê²½ê³ )
                const fileName = file.name;
                const invalidChars = /[<>:"/\\|?*]/;
                const controlChars = /[\x00-\x1f\x80-\x9f]/;
                
                if (invalidChars.test(fileName) || controlChars.test(fileName)) {
                    const confirmUpload = confirm(`âš ï¸ íŒŒì¼ëª… ê²½ê³ \n\níŒŒì¼ëª…ì— ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ë¬¸ì: < > : " / \\ | ? *\në˜ëŠ” ì œì–´ ë¬¸ì\n\ní˜„ì¬ íŒŒì¼ëª…: ${fileName}\n\nê·¸ë˜ë„ ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤)`);
                    
                    if (!confirmUpload) {
                        e.target.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                        return;
                    }
                }
                
                // íŒŒì¼ í¬ê¸° ê²€ì¦ (5MB ì œí•œ)
                const maxSize = 5 * 1024 * 1024; // 5MB
                if (file.size > maxSize) {
                    alert(`âŒ íŒŒì¼ í¬ê¸° ì´ˆê³¼\n\níŒŒì¼ í¬ê¸°ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.\n\ní˜„ì¬ íŒŒì¼ í¬ê¸°: ${(file.size / 1024 / 1024).toFixed(2)}MB\n\në” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`);
                    e.target.value = ''; // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                    return;
                }
                
                try {
                    const formData = new FormData();
                    formData.append('logo', file);
                    formData.append('teamType', 'away');
                    formData.append('sportType', 'SOCCER');
                    formData.append('matchId', '<%= match.id %>');
                    formData.append('teamName', '<%= match.away_team %>');
                    formData.append('originalFilename', file.name);
                    
                    const response = await fetch(`/api/overlay-images/TEAMLOGO/<%= match.sport_type %>`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    if (data.success) {
                        // ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
                        const logoPreview = document.getElementById('away-team-logo-preview');
                        if (logoPreview) {
                            logoPreview.innerHTML = `<img src="${data.logoPath}" alt="ì›ì •íŒ€ ë¡œê³ " class="img-fluid">`;
                            logoPreview.style.backgroundColor = document.getElementById('away-team-logo-bg').value || '#ffffff';
                        }
                        
                        showToast('ì›ì •íŒ€ ë¡œê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                        
                        // WebSocket ì´ë²¤íŠ¸ëŠ” ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì „ì†¡ë¨ (ì¤‘ë³µ ì œê±°)
                    } else {
                        showToast(data.message || 'ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                    }
                } catch (error) {
                    console.error('ì›ì •íŒ€ ë¡œê³  ì—…ë¡œë“œ ì‹¤íŒ¨:', error);
                    showToast('ë¡œê³  ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
                }
            }
        });

        // ê¸°ì¡´ ì €ì¥ ë²„íŠ¼ì€ ëª¨ë‹¬ì—ì„œ ì„ íƒí•œ ë¡œê³  ì €ì¥ìš©ìœ¼ë¡œ ìœ ì§€
        document.querySelectorAll('.save-team-logo').forEach(button => {
            button.addEventListener('click', function() {
                const team = this.getAttribute('data-team');
                console.log(`=== ${team}íŒ€ ë¡œê³  ì €ì¥ ë²„íŠ¼ í´ë¦­ (ëª¨ë‹¬ ì„ íƒ ë¡œê³ ) ===`);
                saveTeamLogo(team);
            });
        });
        
        document.querySelectorAll('.save-team-logo-bg').forEach(button => {
            button.addEventListener('click', function() {
                const team = this.getAttribute('data-team');
                console.log(`=== ${team}íŒ€ ë¡œê³  ë°°ê²½ìƒ‰ ì €ì¥ ë²„íŠ¼ í´ë¦­ ===`);
                saveTeamLogoBg(team);
            });
        });
        
        // íŒ€ë¡œê³  ì‚¬ìš©ìœ ë¬´ í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('toggle-team-logos').addEventListener('click', function() {
            console.log('=== íŒ€ë¡œê³  í† ê¸€ ë²„íŠ¼ í´ë¦­ ===');
            toggleTeamLogos();
        });
        
        // íŒ€ë¡œê³  ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('toggle-logo-display').addEventListener('click', function() {
            console.log('=== íŒ€ë¡œê³  ë°°ê²½ìƒ‰ í† ê¸€ ë²„íŠ¼ í´ë¦­ ===');
            toggleLogoDisplay();
        });
        });

        // ì™„ì „íˆ ìƒˆë¡œìš´ ë‹¨ìˆœí•œ ì„œë²„ íƒ€ì´ë¨¸ ìƒíƒœ ìˆ˜ì‹ 
        socket.on('timer_state', function(data) {
            console.log('=== ì„œë²„ íƒ€ì´ë¨¸ ìƒíƒœ ìˆ˜ì‹  (ì»¨íŠ¸ë¡¤) ===');
            console.log('ìˆ˜ì‹ ëœ ë°ì´í„°:', data);
            console.log('í˜„ì¬ matchId:', matchId);
            
            if (data.matchId === matchId) {
                console.log('íƒ€ì´ë¨¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì „:', { currentTime, isRunning });
                
                currentTime = data.currentSeconds || 0;
                isRunning = data.isRunning || false;
                
                console.log('íƒ€ì´ë¨¸ ìƒíƒœ ì—…ë°ì´íŠ¸ í›„:', { currentTime, isRunning });
                updateTimerDisplay();
                
                if (isRunning) {
                    console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ì‹œì‘');
                    startLocalTimer();
                } else {
                    console.log('ë¡œì»¬ íƒ€ì´ë¨¸ ì •ì§€');
                    stopLocalTimer();
                }
            } else {
                console.log('matchId ë¶ˆì¼ì¹˜:', data.matchId, 'vs', matchId);
            }
        });



        socket.on('match_updated', function(data) {
            console.log('=== ê²½ê¸° ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ìˆ˜ì‹  ===');
            console.log('ë°›ì€ ë°ì´í„°:', data);
            
            if (data.matchId === matchId) {
                if (data.home_score !== undefined) {
                    document.getElementById('home-score').value = data.home_score;
                    console.log('í™ˆíŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸:', data.home_score);
                }
                if (data.away_score !== undefined) {
                    document.getElementById('away-score').value = data.away_score;
                    console.log('ì–´ì›¨ì´íŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸:', data.away_score);
                }
                if (data.home_team) {
                    document.getElementById('home-team-name').value = data.home_team;
                    console.log('í™ˆíŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸:', data.home_team);
                }
                if (data.away_team) {
                    document.getElementById('away-team-name').value = data.away_team;
                    console.log('ì–´ì›¨ì´íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸:', data.away_team);
                    }
                }
            });
            
        // íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì‘ë‹µ ì²˜ë¦¬
        socket.on('teamColorUpdated', function(response) {
            console.log('=== íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì‘ë‹µ ìˆ˜ì‹  ===');
            console.log('ë°›ì€ ë°ì´í„°:', response);
            
            if (response.success) {
                console.log('íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                // íŒ€ ì»¬ëŸ¬ ì €ì¥ ì„±ê³µ í›„ í˜„ì¬ ê²½ê¸° ë°ì´í„° ë‹¤ì‹œ ë¡œë“œí•˜ì—¬ í™•ì¸
                loadMatchData();
                } else {
                console.error('íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', response.message);
            }
        });

        // íŒ€ëª… ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
        socket.on('teamNameUpdated', function(data) {
            console.log('=== íŒ€ëª… ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ìˆ˜ì‹  ===');
            console.log('ë°›ì€ ë°ì´í„°:', data);
            
            if (data.matchId === matchId) {
                const team = data.team;
                const teamName = data.teamName;
                
                console.log(`${team}íŒ€ ì´ë¦„ ì—…ë°ì´íŠ¸:`, teamName);
                
                // íŒ€ëª… ì…ë ¥ í•„ë“œ ì—…ë°ì´íŠ¸
                const nameInput = document.getElementById(`${team}-team-name`);
                if (nameInput) {
                    nameInput.value = teamName;
                    console.log(`${team}íŒ€ ì´ë¦„ ì…ë ¥ í•„ë“œ ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
                }
            }
        });

        // íŒ€ ìœ„ì¹˜ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        socket.on('teamsSwapped', function(data) {
            console.log('=== íŒ€ ìœ„ì¹˜ ë³€ê²½ ì´ë²¤íŠ¸ ìˆ˜ì‹  ===');
            console.log('ë°›ì€ ë°ì´í„°:', data);
            
            if (data.matchId === matchId) {
                // íŒ€ ì •ë³´ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
                updateTeamsAfterSwap();
                console.log('íŒ€ ìœ„ì¹˜ ë³€ê²½ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            }
        });

        // íŒ€ ìœ„ì¹˜ ë³€ê²½ í›„ UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        async function updateTeamsAfterSwap() {
            try {
                console.log('=== íŒ€ ìœ„ì¹˜ ë³€ê²½ í›„ UI ì—…ë°ì´íŠ¸ ì‹œì‘ ===');
                
                // ì„œë²„ì—ì„œ ìµœì‹  ê²½ê¸° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const response = await fetch(`/api/matches/${matchId}`);
                if (!response.ok) {
                    throw new Error('ê²½ê¸° ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                }
                
                const matchData = await response.json();
                console.log('ë¡œë“œëœ ê²½ê¸° ë°ì´í„°:', matchData);
                
                // íŒ€ëª… ì—…ë°ì´íŠ¸
                const homeTeamNameInput = document.getElementById('home-team-name');
                const awayTeamNameInput = document.getElementById('away-team-name');
                
                if (homeTeamNameInput && matchData.home_team) {
                    homeTeamNameInput.value = matchData.home_team;
                    console.log('í™ˆíŒ€ëª… ì—…ë°ì´íŠ¸:', matchData.home_team);
                            } else {
                    console.log('í™ˆíŒ€ëª… ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
                if (awayTeamNameInput && matchData.away_team) {
                    awayTeamNameInput.value = matchData.away_team;
                    console.log('ì–´ì›¨ì´íŒ€ëª… ì—…ë°ì´íŠ¸:', matchData.away_team);
                } else {
                    console.log('ì–´ì›¨ì´íŒ€ëª… ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // ì ìˆ˜ ì—…ë°ì´íŠ¸
                const homeScoreInput = document.getElementById('home-score');
                const awayScoreInput = document.getElementById('away-score');
                
                if (homeScoreInput && matchData.home_score !== undefined) {
                    homeScoreInput.value = matchData.home_score;
                    console.log('í™ˆíŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸:', matchData.home_score);
                            } else {
                    console.log('í™ˆíŒ€ ì ìˆ˜ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
                if (awayScoreInput && matchData.away_score !== undefined) {
                    awayScoreInput.value = matchData.away_score;
                    console.log('ì–´ì›¨ì´íŒ€ ì ìˆ˜ ì—…ë°ì´íŠ¸:', matchData.away_score);
                } else {
                    console.log('ì–´ì›¨ì´íŒ€ ì ìˆ˜ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ (ì§ì ‘ í•„ë“œì™€ match_data ëª¨ë‘ í™•ì¸)
                console.log('=== íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì‹œì‘ ===');
                console.log('ì§ì ‘ í•„ë“œ í™ˆíŒ€ ì»¬ëŸ¬:', matchData.home_team_color);
                console.log('ì§ì ‘ í•„ë“œ ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬:', matchData.away_team_color);
                
                // ì§ì ‘ í•„ë“œì—ì„œ íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸
                const homeColorInput = document.getElementById('home-team-color');
                if (homeColorInput) {
                    if (matchData.home_team_color) {
                        homeColorInput.value = matchData.home_team_color;
                        console.log('í™ˆíŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì„±ê³µ (ì§ì ‘ í•„ë“œ):', matchData.home_team_color);
                    } else {
                        console.log('í™ˆíŒ€ ì»¬ëŸ¬ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤ (ì§ì ‘ í•„ë“œ)');
                    }
                } else {
                    console.log('í™ˆíŒ€ ì»¬ëŸ¬ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
                const awayColorInput = document.getElementById('away-team-color');
                if (awayColorInput) {
                    if (matchData.away_team_color) {
                        awayColorInput.value = matchData.away_team_color;
                        console.log('ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì„±ê³µ (ì§ì ‘ í•„ë“œ):', matchData.away_team_color);
                    } else {
                        console.log('ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤ (ì§ì ‘ í•„ë“œ)');
                    }
                } else {
                    console.log('ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // match_dataì—ì„œë„ íŒ€ ì»¬ëŸ¬ í™•ì¸ (ë°±ì—…ìš©)
                if (matchData.match_data) {
                    const matchDataObj = matchData.match_data;
                    console.log('match_data ê°ì²´:', matchDataObj);
                    console.log('match_data í™ˆíŒ€ ì»¬ëŸ¬:', matchDataObj.home_team_color);
                    console.log('match_data ì–´ì›¨ì´íŒ€ ì»¬ëŸ¬:', matchDataObj.away_team_color);
                }
                
                console.log('=== íŒ€ ì»¬ëŸ¬ ì—…ë°ì´íŠ¸ ì™„ë£Œ ===');
                
                console.log('íŒ€ ìœ„ì¹˜ ë³€ê²½ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                
            } catch (error) {
                console.error('íŒ€ ìœ„ì¹˜ ë³€ê²½ UI ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íŒ€ë¡œê³  ì‚¬ìš© ìƒíƒœ ë¡œë“œ
        loadTeamLogoVisibility();

        // íŒ€ ë¡œê³  ì„ íƒ ëª¨ë‹¬ ê´€ë ¨ ë³€ìˆ˜
        let currentTeamType = null; // 'home' ë˜ëŠ” 'away'
        let allLogos = []; // ëª¨ë“  ë¡œê³  ëª©ë¡
        let filteredLogos = []; // í•„í„°ë§ëœ ë¡œê³  ëª©ë¡
        
        // ë¡œê³  ë¯¸ë¦¬ë³´ê¸° í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        function openLogoModal(teamType) {
            currentTeamType = teamType;
            const modal = new bootstrap.Modal(document.getElementById('teamLogoModal'));
            modal.show();
            loadTeamLogoList();
        }
        
        // íŒ€ ë¡œê³  ëª©ë¡ ë¡œë“œ (í†µí•© API ê¸°ë°˜)
        async function loadTeamLogoList() {
            const logoList = document.getElementById('logoList');
            const logoLoading = document.getElementById('logoLoading');
            const noLogosMessage = document.getElementById('noLogosMessage');
            
            // ë¡œë”© í‘œì‹œ
            logoLoading.style.display = 'block';
            logoList.innerHTML = '';
            noLogosMessage.style.display = 'none';
            
            try {
                // í†µí•© íŒ€ë¡œê³  API í˜¸ì¶œ
                const response = await fetch('/api/team-logos/SOCCER');
                const data = await response.json();
                
                if (data.success && data.teamLogos.length > 0) {
                    // ì¤‘ë³µ ì œê±° ë¡œì§ ì¶”ê°€
                    const uniqueLogos = [];
                    const seenPaths = new Set();
                    const seenNames = new Set();
                    
                    data.teamLogos.forEach(logo => {
                        const logoPath = logo.logo_path;
                        const displayName = logo.display_name || logo.team_name;
                        
                        // logo_pathê°€ ìœ íš¨í•œì§€ í™•ì¸
                        if (!logoPath || logoPath === 'undefined' || logoPath.trim() === '') {
                            console.log('ğŸ”§ ìœ íš¨í•˜ì§€ ì•Šì€ logo_path ì œê±°:', { logoPath, displayName });
                            return; // ì´ ë¡œê³ ëŠ” ê±´ë„ˆë›°ê¸°
                        }
                        
                        // logo_pathì™€ display_name ëª¨ë‘ ì¤‘ë³µ ì²´í¬
                        if (!seenPaths.has(logoPath) && !seenNames.has(displayName)) {
                            seenPaths.add(logoPath);
                            seenNames.add(displayName);
                            uniqueLogos.push(logo);
                        } else {
                            console.log('ğŸ”§ ì¤‘ë³µ ë¡œê³  ì œê±°:', { logoPath, displayName });
                        }
                    });
                    
                    console.log(`ğŸ”§ ì›ë³¸ ë¡œê³ : ${data.teamLogos.length}ê°œ, ì¤‘ë³µ ì œê±° í›„: ${uniqueLogos.length}ê°œ`);
                    allLogos = uniqueLogos;
                    filteredLogos = [...allLogos];
                    displayLogos();
                } else {
                    noLogosMessage.style.display = 'block';
                }
            } catch (error) {
                console.error('íŒ€ ë¡œê³  ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                noLogosMessage.style.display = 'block';
            } finally {
                logoLoading.style.display = 'none';
            }
        }
        
        // ë¡œê³  ëª©ë¡ í‘œì‹œ
        function displayLogos() {
            const logoList = document.getElementById('logoList');
            const deleteMode = document.getElementById('deleteModeCheckbox').checked;
            
            logoList.innerHTML = filteredLogos.map(logo => `
                <div class="col-6 col-md-4">
                    <div class="card h-100 logo-card ${deleteMode ? 'delete-mode' : ''}" 
                         onclick="${deleteMode ? `toggleLogoSelection('${logo.logo_path}')` : `selectLogo('${logo.logo_path}', '${logo.display_name || logo.team_name}')`}" 
                         style="cursor: pointer;">
                        ${deleteMode ? `
                            <div class="form-check position-absolute top-0 start-0 m-2">
                                <input class="form-check-input logo-checkbox" type="checkbox" value="${logo.logo_path}" style="background-color: white;">
                            </div>
                        ` : ''}
                        <div class="card-body text-center p-2">
                            <img src="${logo.logo_path}" alt="${logo.display_name || logo.team_name}" class="img-fluid mb-2" style="max-height: 60px; object-fit: contain;">
                            <h6 class="card-title mb-0" style="font-size: 0.8rem;">${logo.display_name || logo.team_name}</h6>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // ë¡œê³  ì„ íƒ
        function selectLogo(logoPath, logoName) {
            if (!currentTeamType) return;
            
            // íŒ€ ë¡œê³  ë§¤í•‘ ì—…ë°ì´íŠ¸
            updateTeamLogo(currentTeamType, logoPath, logoName);
            
            // ëª¨ë‹¬ ë‹«ê¸°
            const modal = bootstrap.Modal.getInstance(document.getElementById('teamLogoModal'));
            modal.hide();
        }
        
        // íŒ€ ë¡œê³  ì—…ë°ì´íŠ¸ (UI ì—…ë°ì´íŠ¸ + DB ì €ì¥)
        async function updateTeamLogo(teamType, logoPath, logoName) {
            try {
                console.log(`íŒ€ ë¡œê³  ì—…ë°ì´íŠ¸: ${teamType}íŒ€, ë¡œê³ : ${logoName}`);
                
                // í˜„ì¬ íŒ€ì˜ ë°°ê²½ìƒ‰ ê°€ì ¸ì˜¤ê¸°
                const currentBgColor = document.getElementById(`${teamType}-team-logo-preview`).style.backgroundColor || '#ffffff';
                
                // 1. UI ì—…ë°ì´íŠ¸
                const logoPreview = document.getElementById(`${teamType}-team-logo-preview`);
                if (logoPreview) {
                    logoPreview.innerHTML = `<img src="${logoPath}" alt="${teamType}íŒ€ ë¡œê³ " class="img-fluid">`;
                    logoPreview.style.backgroundColor = currentBgColor;
                    console.log(`${teamType}íŒ€ ë¡œê³  UI ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
                }
                
                // 2. DBì— íŒ€ë¡œê³  ì •ë³´ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ë ˆì½”ë“œ ìˆ˜ì •)
                try {
                    const response = await fetch(`/api/matches/${matchId}/team-logos`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            homeLogoPath: teamType === 'home' ? logoPath : null,
                            awayLogoPath: teamType === 'away' ? logoPath : null,
                            homeTeamName: teamType === 'home' ? '<%= match.home_team %>' : null,
                            awayTeamName: teamType === 'away' ? '<%= match.away_team %>' : null,
                            homeTeamColor: teamType === 'home' ? document.getElementById('home-team-color').value : null,
                            awayTeamColor: teamType === 'away' ? document.getElementById('away-team-color').value : null,
                            homeTeamColorBg: teamType === 'home' ? currentBgColor : null,
                            awayTeamColorBg: teamType === 'away' ? currentBgColor : null
                        })
                    });
                    
                    if (response.ok) {
                        console.log(`${teamType}íŒ€ ë¡œê³  DB ì €ì¥ ì„±ê³µ`);
                        
                        // WebSocket ì´ë²¤íŠ¸ë¡œ DB ì •ë³´ ì—…ë°ì´íŠ¸ ì•Œë¦¼
                        if (socket.connected) {
                            socket.emit('dataChanged', {
                                matchId: matchId,
                                type: 'teamLogo',
                                teamType: teamType
                            });
                            console.log('âœ… dataChanged ì´ë²¤íŠ¸ ì „ì†¡ ì™„ë£Œ');
                        }
                    } else {
                        console.error(`${teamType}íŒ€ ë¡œê³  DB ì €ì¥ ì‹¤íŒ¨: ${response.status}`);
                    }
                } catch (dbError) {
                    console.error(`${teamType}íŒ€ ë¡œê³  DB ì €ì¥ ì˜¤ë¥˜:`, dbError);
                }
                
            } catch (error) {
                console.error('íŒ€ ë¡œê³  ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜:', error);
                alert('ë¡œê³  ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ì‚­ì œ ëª¨ë“œ í† ê¸€
        function toggleDeleteMode() {
            const deleteModeCheckbox = document.getElementById('deleteModeCheckbox');
            const deleteButton = document.getElementById('deleteSelectedLogos');
            
            if (deleteModeCheckbox.checked) {
                deleteButton.style.display = 'block';
                // ëª¨ë‹¬ ì œëª© ë³€ê²½
                document.getElementById('teamLogoModalLabel').textContent = 'íŒ€ ë¡œê³  ì‚­ì œ';
            } else {
                deleteButton.style.display = 'none';
                // ëª¨ë‹¬ ì œëª© ë³µì›
                document.getElementById('teamLogoModalLabel').textContent = 'íŒ€ ë¡œê³  ì„ íƒ';
            }
            displayLogos();
        }
        
        // ë¡œê³  ì„ íƒ í† ê¸€ (ì‚­ì œ ëª¨ë“œì—ì„œ)
        function toggleLogoSelection(logoPath) {
            const checkbox = document.querySelector(`input[value="${logoPath}"]`);
            if (checkbox) {
                checkbox.checked = !checkbox.checked;
            }
        }
        
        // ì„ íƒëœ ë¡œê³ ë“¤ ì‚­ì œ
        async function deleteSelectedLogos() {
            const checkboxes = document.querySelectorAll('.logo-checkbox:checked');
            if (checkboxes.length === 0) {
                alert('ì‚­ì œí•  ë¡œê³ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!confirm(`ì„ íƒëœ ${checkboxes.length}ê°œì˜ ë¡œê³ ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }
            
            const deletePromises = Array.from(checkboxes).map(async (checkbox) => {
                const logoPath = checkbox.value;
                try {
                    // ì„œë²„ì—ì„œ ë¡œê³  íŒŒì¼ ì‚­ì œ API í˜¸ì¶œ
                    const response = await fetch('/api/overlay-images/delete-team-logo', {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ logoPath: logoPath })
                    });
                    
                    if (response.ok) {
                        console.log(`ë¡œê³  ì‚­ì œ ì„±ê³µ: ${logoPath}`);
                        return true;
                    } else {
                        console.error(`ë¡œê³  ì‚­ì œ ì‹¤íŒ¨: ${logoPath}`);
                        return false;
                    }
                } catch (error) {
                    console.error(`ë¡œê³  ì‚­ì œ ì˜¤ë¥˜: ${logoPath}`, error);
                    return false;
                }
            });
            
            const results = await Promise.all(deletePromises);
            const successCount = results.filter(r => r).length;
            
            if (successCount > 0) {
                alert(`${successCount}ê°œì˜ ë¡œê³ ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                // ë¡œê³  ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                loadTeamLogoList();
            } else {
                alert('ë¡œê³  ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ê²€ìƒ‰ ê¸°ëŠ¥
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('logoSearchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    filteredLogos = allLogos.filter(logo => 
                        (logo.display_name || logo.team_name).toLowerCase().includes(searchTerm)
                    );
                    displayLogos();
                });
            }
            
            // ì‚­ì œ ëª¨ë“œ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
            const deleteModeCheckbox = document.getElementById('deleteModeCheckbox');
            if (deleteModeCheckbox) {
                deleteModeCheckbox.addEventListener('change', toggleDeleteMode);
            }
            
            // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
            const deleteButton = document.getElementById('deleteSelectedLogos');
            if (deleteButton) {
                deleteButton.addEventListener('click', deleteSelectedLogos);
            }
        });
        
        // ë¼ì¸ì—… ì €ì¥ í•¨ìˆ˜ë“¤
        function saveLineup(teamType) {
            const inputId = teamType === 'home' ? 'homeLineupInput' : 'awayLineupInput';
            const input = document.getElementById(inputId);
            const lineupText = input.value.trim();
            
            if (!lineupText) {
                alert(`${teamType === 'home' ? 'í™ˆíŒ€' : 'ì–´ì›¨ì´íŒ€'} ë¼ì¸ì—…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
                return;
            }
            
            // í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ ë¼ì¸ì—… ë°°ì—´ ìƒì„±
            const lineup = parseLineupText(lineupText);
            
            if (lineup.length === 0) {
                alert('ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ ë¼ì¸ì—…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (ë²ˆí˜¸ ì´ë¦„ í¬ì§€ì…˜)');
                return;
            }
            
            // ì„œë²„ì— ì €ì¥
            saveLineupToServer(teamType, lineup);
        }
        
        function saveAllLineup() {
            const homeInput = document.getElementById('homeLineupInput');
            const awayInput = document.getElementById('awayLineupInput');
            
            const homeLineupText = homeInput.value.trim();
            const awayLineupText = awayInput.value.trim();
            
            if (!homeLineupText && !awayLineupText) {
                alert('ë¼ì¸ì—…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const homeLineup = homeLineupText ? parseLineupText(homeLineupText) : [];
            const awayLineup = awayLineupText ? parseLineupText(awayLineupText) : [];
            
            const lineup = {
                home: homeLineup,
                away: awayLineup
            };
            
            // ì„œë²„ì— ì €ì¥
            saveLineupToServer('all', lineup);
        }
        
        function parseLineupText(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const lineup = [];
            
            lines.forEach(line => {
                const parts = line.trim().split(/\s+/);
                if (parts.length >= 3) {
                    const number = parts[0];
                    const name = parts[1];
                    const position = parts[2];
                    
                    lineup.push({
                        number: number,
                        name: name,
                        position: position
                    });
                }
            });
            
            return lineup;
        }
        
        async function saveLineupToServer(teamType, lineup) {
            try {
                const url = teamType === 'all' ? '/api/matches/save-lineup' : `/api/matches/${matchId}/save-lineup`;
                const data = teamType === 'all' ? 
                    { matchId: matchId, lineup: lineup } : 
                    { matchId: matchId, teamType: teamType, lineup: lineup };
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert(`${teamType === 'all' ? 'ì „ì²´' : (teamType === 'home' ? 'í™ˆíŒ€' : 'ì–´ì›¨ì´íŒ€')} ë¼ì¸ì—…ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                } else {
                    alert('ë¼ì¸ì—… ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ë¼ì¸ì—… ì €ì¥ ì˜¤ë¥˜:', error);
                alert('ë¼ì¸ì—… ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
    </script>

    <!-- íŒ€ ë¡œê³  ì„ íƒ ëª¨ë‹¬ -->
    <div class="modal fade" id="teamLogoModal" tabindex="-1" aria-labelledby="teamLogoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="teamLogoModalLabel">íŒ€ ë¡œê³  ì„ íƒ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- ê²€ìƒ‰ ì…ë ¥ í•„ë“œ -->
                    <div class="mb-3">
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-search"></i></span>
                            <input type="text" class="form-control" id="logoSearchInput" placeholder="ë¡œê³  ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...">
                        </div>
                    </div>
                    
                    <!-- ì‚­ì œ ê¸°ëŠ¥ ì»¨íŠ¸ë¡¤ -->
                    <div class="mb-3 d-flex justify-content-between align-items-center">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="deleteModeCheckbox">
                            <label class="form-check-label" for="deleteModeCheckbox">
                                ì‚­ì œ ëª¨ë“œ
                            </label>
                        </div>
                        <button type="button" class="btn btn-danger btn-sm" id="deleteSelectedLogos" style="display: none;">
                            <i class="bi bi-trash"></i> ì„ íƒëœ ë¡œê³  ì‚­ì œ
                        </button>
                    </div>
                    
                    <!-- ë¡œê³  ëª©ë¡ -->
                    <div id="logoList" class="row g-2">
                        <!-- ë¡œê³ ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                    </div>
                    
                    <!-- ë¡œë”© ìƒíƒœ -->
                    <div id="logoLoading" class="text-center py-3" style="display: none;">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">ë¡œë”© ì¤‘...</span>
                        </div>
                        <p class="mt-2">ë¡œê³  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                    
                    <!-- ë¡œê³ ê°€ ì—†ì„ ë•Œ ë©”ì‹œì§€ -->
                    <div id="noLogosMessage" class="text-center py-4" style="display: none;">
                        <i class="bi bi-image text-muted" style="font-size: 2rem;"></i>
                        <p class="text-muted mt-2">ë“±ë¡ëœ ë¡œê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 